/*
 * config.c
 *
 *  Created on: 7 мар. 2022 г.
 *      Author: VHEMaster
 */

#include "config.h"
#include "structs.h"
#include "flash.h"
#include "defines.h"
#include "ecu_config_transform.h"

#include <stdio.h>
#include <string.h>
#include <math.h>

#define CONFIG_OFFSET_PARAMS (0)
#define CONFIG_OFFSET_CORRECTIONS (CONFIG_OFFSET_PARAMS + 1)
#define CONFIG_OFFSET_TABLES (CONFIG_OFFSET_CORRECTIONS + 1)

#define CONFIG_OFFSET_CRITICALS 1920

static const sEcuTableTransform default_ecu_table_transform = {
    .cylinders = { .gain = 1.0f, .offset = 0.0f },
    .voltages = { .gain = 0.1f, .offset = 0.0f },
    .pressures_16 = { .gain = 10.0f, .offset = 0.0f },
    .pressures_32 = { .gain = 10.0f, .offset = 0.0f },
    .rotates_16 = { .gain = 1.0f, .offset = 0.0f },
    .rotates_32 = { .gain = 1.0f, .offset = 0.0f },
    .idle_rotates = { .gain = 1.0f, .offset = 0.0f },
    .throttles_16 = { .gain = 0.01f, .offset = 0.0f },
    .throttles_32 = { .gain = 0.01f, .offset = 0.0f },
    .pedals = { .gain = 0.01f, .offset = 0.0f },
    .filling_gbc_map = { .gain = 0.0001f, .offset = 0.0f },
    .filling_gbc_tps = { .gain = 0.0001f, .offset = 0.0f },
    .throttle_position = { .gain = 0.01f, .offset = 0.0f },
    .stop_throttle_position = { .gain = 0.01f, .offset = 0.0f },
    .filling_select_koff_tps = { .gain = 0.005f, .offset = 0.0f },
    .enrichment_injection_phase = { .gain = 3.0f, .offset = 0.0f },
    .enrichment_rate_start_load = { .gain = 0.5f, .offset = 0.0f },
    .enrichment_rate_load_derivative = { .gain = 100.0f, .offset = 0.0f },
    .enrichment_rate = { .gain = 0.01f, .offset = 0.0f },
    .enrichment_sync_amount = { .gain = 0.01f, .offset = 0.0f },
    .enrichment_async_amount = { .gain = 0.01f, .offset = 0.0f },
    .enrichment_ign_corr = { .gain = 0.1f, .offset = 0.0f },
    .enrichment_temp_mult = { .gain = 0.01f, .offset = 0.0f },
    .fillings_16 = { .gain = 3.0f, .offset = 0.0f },
    .fillings_32 = { .gain = 3.0f, .offset = 0.0f },
    .ignitions = { .gain = 0.2f, .offset = 0.0f },
    .ignition_corr_cy = { .gain = 0.1f, .offset = 0.0f },
    .injection_corr_cy = { .gain = 0.1f, .offset = 0.0f },
    .fuel_mixtures = { .gain = 0.05f, .offset = 5.0f },
    .injection_phase = { .gain = 3.0f, .offset = 0.0f },
    .ignition_time_rpm_mult = { .gain = 0.05f, .offset = 0.0f },
    .ignition_time = { .gain = 50.0f, .offset = 0.0f },
    .injector_lag = { .gain = 0.02f, .offset = 0.0f },
    .engine_temps = { .gain = 1.25f, .offset = 0.0f },
    .air_temps = { .gain = 1.25f, .offset = 0.0f },
    .air_temp_mix_corr = { .gain = 0.005f, .offset = 0.0f },
    .air_temp_ign_corr = { .gain = 0.1f, .offset = 0.0f },
    .engine_temp_mix_corr = { .gain = 0.005f, .offset = 0.0f },
    .engine_temp_ign_corr = { .gain = 0.1f, .offset = 0.0f },
    .idle_wish_rotates = { .gain = 10.0f, .offset = 500.0f },
    .idle_wish_massair = { .gain = 0.1f, .offset = 9.0f },
    .idle_wish_ignition = { .gain = 0.2f, .offset = -10.0f },
    .idle_wish_ignition_static = { .gain = 0.2f, .offset = -10.0f },
    .idle_valve_position = { .gain = 1.0f, .offset = 0.0f },
    .idle_throttle_position = { .gain = 0.1f, .offset = 0.0f },
    .idle_rpm_pid_act_1 = { .gain = 0.005f, .offset = 0.0f },
    .idle_rpm_pid_act_2 = { .gain = 0.005f, .offset = 0.0f },
    .idle_pids_rpm_koffs = { .gain = 0.005f, .offset = 1.0f },
    .idle_valve_to_massair_pid_p = { .gain = 0.05f, .offset = 0.0f },
    .idle_valve_to_massair_pid_i = { .gain = 0.05f, .offset = 0.0f },
    .idle_valve_to_massair_pid_d = { .gain = 0.001f, .offset = 0.0f },
    .idle_valve_to_rpm_pid_p = { .gain = 0.01f, .offset = 0.0f },
    .idle_valve_to_rpm_pid_i = { .gain = 0.005f, .offset = 0.0f },
    .idle_valve_to_rpm_pid_d = { .gain = 0.0001f, .offset = 0.0f },
    .idle_throttle_to_massair_pid_p = { .gain = 0.01f, .offset = 0.0f },
    .idle_throttle_to_massair_pid_i = { .gain = 0.01f, .offset = 0.0f },
    .idle_throttle_to_massair_pid_d = { .gain = 0.0001f, .offset = 0.0f },
    .idle_throttle_to_rpm_pid_p = { .gain = 0.001f, .offset = 0.0f },
    .idle_throttle_to_rpm_pid_i = { .gain = 0.0005f, .offset = 0.0f },
    .idle_throttle_to_rpm_pid_d = { .gain = 0.0001f, .offset = 0.0f },
    .idle_ign_to_rpm_pid_p = { .gain = 0.001f, .offset = 0.0f },
    .idle_ign_to_rpm_pid_i = { .gain = 0.0005f, .offset = 0.0f },
    .idle_ign_to_rpm_pid_d = { .gain = 0.0001f, .offset = 0.0f },
    .warmup_mixtures = { .gain = 0.05f, .offset = 5.0f },
    .warmup_mix_koffs = { .gain = 0.005f, .offset = 0.0f },
    .warmup_mix_corrs = { .gain = 0.005f, .offset = 0.0f },
    .cold_start_idle_corrs = { .gain = 0.01f, .offset = 0.0f },
    .cold_start_idle_times = { .gain = 0.5f, .offset = 0.0f },
    .start_injection_phase = { .gain = 2.0f, .offset = 0.0f },
    .start_idle_valve_pos = { .gain = 1.0f, .offset = 0.0f },
    .start_throttle_position = { .gain = 0.1f, .offset = 0.0f },
    .start_ignition = { .gain = 0.2f, .offset = 0.0f },
    .start_tps_corrs = { .gain = 0.01f, .offset = 0.0f },
    .start_async_filling = { .gain = 0.01f, .offset = 0.0f },
    .start_large_filling = { .gain = 0.01f, .offset = 0.0f },
    .start_small_filling = { .gain = 0.01f, .offset = 0.0f },
    .start_filling_time = { .gain = 0.05f, .offset = 0.0f },
    .speeds = { .gain = 1.0f, .offset = 0.0f },
    .idle_rpm_shift = { .gain = 10.0f, .offset = 0.0f },
    .knock_noise_level = { .gain = 0.01f, .offset = 0.0f },
    .knock_threshold = { .gain = 0.02f, .offset = 0.0f },
    .knock_zone = { .gain = 0.005f, .offset = 0.0f },
    .knock_gain = { .gain = 1.0f, .offset = 0.0f },
    .knock_filter_frequency = { .gain = 1.0f, .offset = 0.0f },
    .knock_cy_level_multiplier = { .gain = 0.01f, .offset = 0.0f },
    .tsps_relative_pos = { .gain = 0.2f, .offset = -114.0f },
    .tsps_desync_thr = { .gain = 0.1f, .offset = 0.0f },
    .idle_ignition_time_by_tps = { .gain = 0.02f, .offset = 0.0f },
    .idle_econ_delay = { .gain = 0.1f, .offset = 0.0f },
    .start_econ_delay = { .gain = 0.1f, .offset = 0.0f },
    .fan_advance_control = { .gain = 0.01f, .offset = 0.0f },
    .idle_valve_econ_position = { .gain = 1.0f, .offset = 0.0f },
    .idle_throttle_econ_position = { .gain = 0.1f, .offset = 0.0f },
    .pedal_ignition_control = { .gain = 0.1f, .offset = 0.0f },
    .throttle_position_1d = { .gain = 0.01f, .offset = 0.0f },
    .throttle_startup_move_time = { .gain = 0.1f, .offset = 0.0f },
    .knock_detect_phase_start = { .gain = 1.0f, .offset = 0.0f },
    .knock_detect_phase_end = { .gain = 1.0f, .offset = 0.0f },
    .knock_integrator_time = { .gain = 1.0f, .offset = 0.0f },
    .enrichment_tps_selection = { .gain = 0.005f, .offset = 0.0f },
    .enrichment_accel_dead_band = { .gain = 1000.0f, .offset = 0.0f },
    .dynamic_fuel_corr_gbc = { .gain = 0.01f, .offset = 0.0f },
    .dynamic_fuel_corr_temp = { .gain = 0.01f, .offset = 0.0f },
    .dynamic_fuel_corr_lpf = { .gain = 0.005f, .offset = 0.0f },
};

static const sEcuCorrectionsTransform default_ecu_corrections_transform = {
    .ignitions = { .gain = 0.08f, .offset = 0.0f },
    .filling_gbc_map = { .gain = 0.005f, .offset = 0.0f },
    .filling_gbc_tps = { .gain = 0.005f, .offset = 0.0f },
    .idle_valve_position = { .gain = 0.01f, .offset = 0.0f },
    .knock_cy_level_multiplier = { .gain = 0.01f, .offset = 0.0f },
    .ignition_corr_cy = { .gain = 0.08f, .offset = 0.0f },
    .injection_corr_cy = { .gain = 0.001f, .offset = 0.0f },
    .knock_detonation_counter = { .gain = 1.0f, .offset = 0.0f },
    .progress = { .gain = 0.0039215f, .offset = 0.0f },
};

static const float default_cylinders[ECU_CYLINDERS_COUNT] = {
    1, 2, 3, 4
};

static const float default_pressures_16[TABLE_PRESSURES_16] = {
    10000, 16200, 22400, 28600, 34800, 41000, 47200, 53400,
    59600, 65800, 72000, 78200, 84400, 90600, 96800, 103000
};

static const float default_pressures_32[TABLE_PRESSURES_32] = {
    10000, 13100, 16100, 19200, 22300, 25300, 28400, 31500,
    34500, 37600, 40600, 43700, 46800, 49800, 52900, 56000,
    59000, 62100, 65200, 68200, 71300, 74400, 77400, 80500,
    83500, 86600, 89700, 92700, 95800, 98900, 101900, 105000,
};

static const float default_idle_rotates[TABLE_ROTATES_16] = {
    525, 556, 588, 625, 667, 714, 769, 833,
    909, 1000, 1111, 1250, 1429, 1667, 2000, 2500
};

static const float default_rotates_16[TABLE_ROTATES_16] = {
    600, 740, 870, 1050, 1250, 1490, 1800, 2150,
    2560, 3040, 3590, 4310, 5100, 6060, 7190, 8500
};

static const float default_rotates_32[TABLE_ROTATES_32] = {
    600, 730, 870, 1010, 1120, 1250, 1380, 1520,
    1700, 1880, 2050, 2270, 2540, 2800, 3100, 3420,
    3710, 4030, 4350, 4670, 4990, 5310, 5630, 5950,
    6260, 6580, 6900, 7220, 7540, 7860, 8180, 8500,
};

static const float default_throttles_16[TABLE_THROTTLES_16] = {
    0.0f, 1.73f, 3.47f, 5.65f, 8.26f, 11.30f, 15.22f, 19.56f,
    24.78f, 30.87f, 37.83f, 46.96f, 56.96f, 69.13f, 83.48f, 100.0f
};

static const float default_throttles_32[TABLE_THROTTLES_32] = {
    0.0f, 0.8f, 1.6f, 2.4f, 3.2f, 4.1f, 5.1f, 6.3f,
    7.5f, 8.9f, 10.3f, 12.1f, 13.8f, 15.8f, 17.8f, 20.2f,
    22.5f, 25.3f, 28.1f, 31.2f, 34.4f, 38.5f, 42.7f, 47.2f,
    51.8f, 57.3f, 62.8f, 69.4f, 75.9f, 83.4f, 90.9f, 100.0f,
};

static const float default_pedals[TABLE_PEDALS] = {
    0.0f, 1.73f, 3.47f, 5.65f, 8.26f, 11.30f, 15.22f, 19.56f,
    24.78f, 30.87f, 37.83f, 46.96f, 56.96f, 69.13f, 83.48f, 100.0f
};

static const float default_fillings_16[TABLE_FILLING_16] = {
    33, 65, 98, 130, 163, 195, 228, 260,
    293, 325, 358, 390, 423, 455, 488, 520,
};

static const float default_fillings_32[TABLE_FILLING_32] = {
    33, 50, 67, 84, 101, 118, 135, 152,
    169, 186, 203, 220, 237, 254, 271, 288,
    305, 322, 339, 356, 373, 390, 407, 424,
    441, 458, 475, 492, 509, 526, 543, 560,
};

static const float default_filling_select_koff_tps[TABLE_ROTATES_16] = {
    0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f,
    0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f,
};

static const float default_filling_gbc_map[TABLE_PRESSURES_32][TABLE_ROTATES_32] = {
    { 0.063f, 0.0619f, 0.0617f, 0.0616f, 0.0616f, 0.0617f, 0.062f, 0.0625f, 0.0635f, 0.0662f, 0.0707f, 0.0734f, 0.0737f, 0.0724f, 0.0721f, 0.0773f, 0.0791f, 0.0763f, 0.0737f, 0.0733f, 0.0729f, 0.0733f, 0.0743f, 0.0753f, 0.075f, 0.0739f, 0.0729f, 0.072f, 0.072f, 0.072f, 0.072f, 0.072f },
    { 0.082f, 0.0813f, 0.081f, 0.0808f, 0.0808f, 0.0809f, 0.0813f, 0.0818f, 0.0831f, 0.0835f, 0.0829f, 0.0789f, 0.0708f, 0.0643f, 0.0603f, 0.0702f, 0.074f, 0.0698f, 0.0662f, 0.0666f, 0.0669f, 0.0709f, 0.0769f, 0.0828f, 0.0866f, 0.0893f, 0.0921f, 0.0943f, 0.0912f, 0.0881f, 0.085f, 0.0819f },
    { 0.1003f, 0.1001f, 0.0997f, 0.0994f, 0.0994f, 0.0994f, 0.0999f, 0.1005f, 0.102f, 0.1003f, 0.0947f, 0.0843f, 0.068f, 0.0565f, 0.0488f, 0.0634f, 0.0691f, 0.0636f, 0.059f, 0.06f, 0.0611f, 0.0686f, 0.0793f, 0.0901f, 0.0978f, 0.1042f, 0.1106f, 0.1158f, 0.1097f, 0.1036f, 0.0975f, 0.0914f },
    { 0.0993f, 0.0991f, 0.0985f, 0.0981f, 0.098f, 0.098f, 0.0986f, 0.1003f, 0.108f, 0.1081f, 0.0994f, 0.0867f, 0.0696f, 0.0582f, 0.0499f, 0.0598f, 0.0644f, 0.0628f, 0.0618f, 0.0646f, 0.0673f, 0.073f, 0.0803f, 0.0875f, 0.0966f, 0.1072f, 0.1178f, 0.1269f, 0.1219f, 0.1169f, 0.1119f, 0.1068f },
    { 0.0977f, 0.0974f, 0.0967f, 0.0961f, 0.0959f, 0.0959f, 0.0966f, 0.0995f, 0.1135f, 0.1157f, 0.1039f, 0.089f, 0.0713f, 0.0602f, 0.0513f, 0.0562f, 0.0597f, 0.0622f, 0.065f, 0.0694f, 0.0739f, 0.0777f, 0.0811f, 0.0846f, 0.095f, 0.1098f, 0.1246f, 0.1376f, 0.1338f, 0.13f, 0.1263f, 0.1225f },
    { 0.1108f, 0.1103f, 0.1095f, 0.1088f, 0.1091f, 0.1098f, 0.112f, 0.1145f, 0.1185f, 0.1157f, 0.105f, 0.0947f, 0.0857f, 0.0748f, 0.0674f, 0.0824f, 0.0915f, 0.0947f, 0.0979f, 0.1011f, 0.1044f, 0.1046f, 0.1032f, 0.1018f, 0.1113f, 0.1273f, 0.1433f, 0.1574f, 0.1536f, 0.1498f, 0.146f, 0.1422f },
    { 0.1249f, 0.1243f, 0.1232f, 0.1225f, 0.1232f, 0.1247f, 0.1285f, 0.1305f, 0.1238f, 0.1156f, 0.106f, 0.1006f, 0.1011f, 0.0904f, 0.0845f, 0.1104f, 0.1256f, 0.1294f, 0.133f, 0.1348f, 0.1367f, 0.1332f, 0.1268f, 0.1204f, 0.1289f, 0.146f, 0.1631f, 0.1782f, 0.1743f, 0.1705f, 0.1666f, 0.1628f },
    { 0.1394f, 0.1387f, 0.1378f, 0.1375f, 0.138f, 0.1392f, 0.1535f, 0.1616f, 0.1383f, 0.1225f, 0.1166f, 0.1111f, 0.1066f, 0.0975f, 0.0943f, 0.1243f, 0.1426f, 0.149f, 0.1553f, 0.1601f, 0.165f, 0.1624f, 0.1559f, 0.1494f, 0.156f, 0.1701f, 0.1843f, 0.1967f, 0.1927f, 0.1888f, 0.1848f, 0.1809f },
    { 0.1534f, 0.1527f, 0.152f, 0.152f, 0.1524f, 0.1532f, 0.1782f, 0.1927f, 0.1529f, 0.1297f, 0.1275f, 0.1216f, 0.1112f, 0.1038f, 0.1034f, 0.1367f, 0.1578f, 0.167f, 0.176f, 0.1841f, 0.1922f, 0.1908f, 0.1845f, 0.1782f, 0.1829f, 0.1939f, 0.2049f, 0.2144f, 0.2104f, 0.2064f, 0.2023f, 0.1983f },
    { 0.1685f, 0.2019f, 0.1679f, 0.1692f, 0.1774f, 0.1919f, 0.188f, 0.1795f, 0.1486f, 0.1355f, 0.1442f, 0.1446f, 0.1343f, 0.128f, 0.1293f, 0.1651f, 0.1887f, 0.2012f, 0.2127f, 0.2172f, 0.2218f, 0.2181f, 0.2102f, 0.2023f, 0.2046f, 0.2127f, 0.2208f, 0.2276f, 0.2225f, 0.2173f, 0.2122f, 0.207f },
    { 0.1832f, 0.253f, 0.1835f, 0.186f, 0.2025f, 0.2319f, 0.1959f, 0.1621f, 0.1425f, 0.141f, 0.1609f, 0.1682f, 0.1584f, 0.1533f, 0.156f, 0.1941f, 0.2202f, 0.2359f, 0.2497f, 0.2501f, 0.2505f, 0.2443f, 0.2347f, 0.2251f, 0.2251f, 0.2304f, 0.2357f, 0.2399f, 0.2335f, 0.2272f, 0.2208f, 0.2145f },
    { 0.2011f, 0.25f, 0.2111f, 0.2113f, 0.21f, 0.2074f, 0.1902f, 0.1736f, 0.1618f, 0.1631f, 0.1801f, 0.1866f, 0.1787f, 0.1818f, 0.1917f, 0.2249f, 0.2484f, 0.2638f, 0.2771f, 0.2755f, 0.274f, 0.2692f, 0.2628f, 0.2563f, 0.2578f, 0.2637f, 0.2696f, 0.274f, 0.2635f, 0.253f, 0.2425f, 0.232f },
    { 0.2193f, 0.2387f, 0.2403f, 0.2379f, 0.2148f, 0.1732f, 0.1825f, 0.1895f, 0.1848f, 0.1877f, 0.1996f, 0.204f, 0.1983f, 0.2107f, 0.2286f, 0.2558f, 0.2758f, 0.2904f, 0.3029f, 0.2997f, 0.2965f, 0.2937f, 0.2913f, 0.2888f, 0.2923f, 0.2993f, 0.3063f, 0.3112f, 0.2962f, 0.2811f, 0.2661f, 0.251f },
    { 0.2982f, 0.2893f, 0.2856f, 0.257f, 0.2233f, 0.1759f, 0.1965f, 0.2129f, 0.206f, 0.2104f, 0.2278f, 0.2322f, 0.2191f, 0.2297f, 0.2476f, 0.2806f, 0.3056f, 0.3258f, 0.3428f, 0.338f, 0.3332f, 0.3273f, 0.3209f, 0.3145f, 0.3162f, 0.3224f, 0.3287f, 0.3333f, 0.322f, 0.3108f, 0.2996f, 0.2884f },
    { 0.3895f, 0.3513f, 0.335f, 0.2757f, 0.2327f, 0.1843f, 0.2145f, 0.2383f, 0.2278f, 0.2336f, 0.2584f, 0.2631f, 0.2408f, 0.248f, 0.2645f, 0.3053f, 0.337f, 0.3638f, 0.3864f, 0.38f, 0.3735f, 0.3636f, 0.3518f, 0.3401f, 0.3393f, 0.3445f, 0.3497f, 0.3538f, 0.3479f, 0.3419f, 0.3359f, 0.33f },
    { 0.4314f, 0.3143f, 0.3297f, 0.2774f, 0.2471f, 0.2186f, 0.2459f, 0.2672f, 0.2561f, 0.2589f, 0.278f, 0.2813f, 0.2635f, 0.2729f, 0.2918f, 0.3361f, 0.3685f, 0.3921f, 0.4122f, 0.408f, 0.4037f, 0.3911f, 0.3742f, 0.3572f, 0.3573f, 0.3669f, 0.3765f, 0.3847f, 0.3793f, 0.374f, 0.3686f, 0.3633f },
    { 0.4627f, 0.26f, 0.3144f, 0.2759f, 0.262f, 0.2565f, 0.2789f, 0.2959f, 0.2848f, 0.2838f, 0.2948f, 0.2965f, 0.2857f, 0.2981f, 0.3201f, 0.367f, 0.3989f, 0.4176f, 0.4338f, 0.4324f, 0.4311f, 0.4162f, 0.3942f, 0.3721f, 0.3738f, 0.3887f, 0.4035f, 0.4164f, 0.4108f, 0.4052f, 0.3996f, 0.394f },
    { 0.4413f, 0.267f, 0.3207f, 0.2816f, 0.2708f, 0.2715f, 0.2956f, 0.3146f, 0.3061f, 0.3069f, 0.3185f, 0.3216f, 0.3131f, 0.329f, 0.3533f, 0.3952f, 0.4242f, 0.4422f, 0.4581f, 0.46f, 0.4619f, 0.4475f, 0.4246f, 0.4017f, 0.4076f, 0.4296f, 0.4517f, 0.4717f, 0.4722f, 0.4728f, 0.4733f, 0.4739f },
    { 0.4069f, 0.2891f, 0.3324f, 0.2889f, 0.278f, 0.2806f, 0.3081f, 0.3306f, 0.3255f, 0.3294f, 0.3436f, 0.3488f, 0.3417f, 0.361f, 0.3874f, 0.4225f, 0.4481f, 0.4663f, 0.4829f, 0.4881f, 0.4932f, 0.4801f, 0.4574f, 0.4346f, 0.4454f, 0.475f, 0.5047f, 0.5324f, 0.5406f, 0.5489f, 0.5571f, 0.5654f },
    { 0.5004f, 0.3078f, 0.3189f, 0.2953f, 0.293f, 0.3015f, 0.3305f, 0.3546f, 0.3519f, 0.3593f, 0.378f, 0.3841f, 0.373f, 0.3909f, 0.4173f, 0.4582f, 0.4848f, 0.4977f, 0.5099f, 0.5169f, 0.5239f, 0.5126f, 0.4918f, 0.471f, 0.4814f, 0.5095f, 0.5376f, 0.564f, 0.5746f, 0.5851f, 0.5957f, 0.6062f },
    { 0.6299f, 0.3265f, 0.2986f, 0.3016f, 0.3107f, 0.3261f, 0.3562f, 0.3816f, 0.3812f, 0.3922f, 0.416f, 0.4227f, 0.4063f, 0.4216f, 0.4475f, 0.4975f, 0.5263f, 0.5323f, 0.5385f, 0.5471f, 0.5556f, 0.5465f, 0.5281f, 0.5097f, 0.5185f, 0.5426f, 0.5668f, 0.5898f, 0.6014f, 0.6129f, 0.6245f, 0.6361f },
    { 0.7289f, 0.3428f, 0.337f, 0.3558f, 0.3576f, 0.351f, 0.3818f, 0.4076f, 0.4057f, 0.4169f, 0.4428f, 0.4504f, 0.4331f, 0.4566f, 0.4903f, 0.5381f, 0.5663f, 0.5738f, 0.5806f, 0.5827f, 0.5849f, 0.5775f, 0.565f, 0.5525f, 0.5536f, 0.5622f, 0.5709f, 0.5804f, 0.598f, 0.6155f, 0.6331f, 0.6507f },
    { 0.8161f, 0.3579f, 0.3908f, 0.4217f, 0.4112f, 0.3752f, 0.4066f, 0.4324f, 0.4281f, 0.4384f, 0.4655f, 0.474f, 0.4572f, 0.4916f, 0.5352f, 0.5777f, 0.6046f, 0.6159f, 0.625f, 0.6188f, 0.6126f, 0.6067f, 0.6009f, 0.595f, 0.587f, 0.5774f, 0.5677f, 0.5613f, 0.5861f, 0.611f, 0.6358f, 0.6607f },
    { 0.864f, 0.39f, 0.4303f, 0.4302f, 0.4264f, 0.4195f, 0.4396f, 0.4567f, 0.4573f, 0.4696f, 0.4951f, 0.5064f, 0.4982f, 0.5293f, 0.567f, 0.5992f, 0.6248f, 0.6476f, 0.6661f, 0.6558f, 0.6455f, 0.6382f, 0.6325f, 0.6267f, 0.6175f, 0.6058f, 0.5941f, 0.5861f, 0.6128f, 0.6395f, 0.6663f, 0.693f },
    { 0.8962f, 0.4266f, 0.4632f, 0.4182f, 0.4276f, 0.4689f, 0.4741f, 0.4798f, 0.4876f, 0.5028f, 0.5257f, 0.5405f, 0.5434f, 0.5663f, 0.5928f, 0.6134f, 0.6379f, 0.6742f, 0.7043f, 0.6915f, 0.6787f, 0.6691f, 0.6612f, 0.6533f, 0.6456f, 0.6377f, 0.6297f, 0.625f, 0.6517f, 0.6784f, 0.705f, 0.7317f },
    { 0.9397f, 0.5536f, 0.5436f, 0.4624f, 0.4609f, 0.5012f, 0.5108f, 0.5189f, 0.5189f, 0.5299f, 0.5535f, 0.5712f, 0.5799f, 0.6002f, 0.6243f, 0.648f, 0.6744f, 0.7112f, 0.742f, 0.7307f, 0.7193f, 0.7093f, 0.6998f, 0.6904f, 0.6808f, 0.6707f, 0.6606f, 0.6539f, 0.6806f, 0.7073f, 0.734f, 0.7607f },
    { 0.9875f, 0.7171f, 0.6429f, 0.5298f, 0.5074f, 0.5259f, 0.5479f, 0.5642f, 0.5501f, 0.5542f, 0.5797f, 0.6001f, 0.6123f, 0.6324f, 0.6577f, 0.6908f, 0.7203f, 0.7521f, 0.7789f, 0.7707f, 0.7625f, 0.7528f, 0.7421f, 0.7315f, 0.7186f, 0.7038f, 0.689f, 0.6782f, 0.7049f, 0.7316f, 0.7584f, 0.7851f },
    { 0.9364f, 0.793f, 0.657f, 0.5383f, 0.5201f, 0.5491f, 0.5725f, 0.5898f, 0.5749f, 0.5832f, 0.6183f, 0.639f, 0.6391f, 0.6664f, 0.701f, 0.7402f, 0.7696f, 0.7927f, 0.8127f, 0.8106f, 0.8086f, 0.8018f, 0.7925f, 0.7831f, 0.7676f, 0.7479f, 0.7282f, 0.7122f, 0.7321f, 0.7519f, 0.7718f, 0.7916f },
    { 0.8405f, 0.835f, 0.6353f, 0.5221f, 0.5187f, 0.5726f, 0.5927f, 0.6081f, 0.5981f, 0.6155f, 0.6641f, 0.6841f, 0.6647f, 0.7028f, 0.7506f, 0.7947f, 0.8228f, 0.8352f, 0.8468f, 0.8524f, 0.8581f, 0.8555f, 0.8487f, 0.8418f, 0.8239f, 0.7989f, 0.7739f, 0.7521f, 0.7618f, 0.7715f, 0.7811f, 0.7908f },
    { 0.8517f, 0.8877f, 0.6941f, 0.6123f, 0.6108f, 0.6515f, 0.6655f, 0.6732f, 0.6488f, 0.6543f, 0.6948f, 0.7221f, 0.73f, 0.7618f, 0.8007f, 0.8422f, 0.8675f, 0.8762f, 0.8851f, 0.8956f, 0.9061f, 0.9016f, 0.8891f, 0.8767f, 0.8579f, 0.8346f, 0.8113f, 0.7905f, 0.7936f, 0.7967f, 0.7998f, 0.8029f },
    { 0.912f, 0.9434f, 0.7882f, 0.7486f, 0.7429f, 0.7534f, 0.76f, 0.7577f, 0.7104f, 0.6948f, 0.7176f, 0.7558f, 0.8115f, 0.8292f, 0.8495f, 0.8849f, 0.9069f, 0.9151f, 0.9241f, 0.938f, 0.952f, 0.9426f, 0.9211f, 0.8995f, 0.8806f, 0.8621f, 0.8437f, 0.8269f, 0.8253f, 0.8238f, 0.8222f, 0.8207f },
    { 0.9341f, 0.9639f, 0.8227f, 0.7986f, 0.7914f, 0.7908f, 0.7947f, 0.7887f, 0.733f, 0.7097f, 0.7259f, 0.7681f, 0.8414f, 0.854f, 0.8673f, 0.9006f, 0.9213f, 0.9294f, 0.9384f, 0.9536f, 0.9688f, 0.9577f, 0.9328f, 0.9079f, 0.8889f, 0.8722f, 0.8556f, 0.8402f, 0.8369f, 0.8337f, 0.8304f, 0.8272f },
};

static const float default_filling_gbc_tps[TABLE_THROTTLES_32][TABLE_ROTATES_32] = {
    { 0.5079f, 0.3786f, 0.3369f, 0.2634f, 0.2328f, 0.2151f, 0.2076f, 0.2002f, 0.1936f, 0.1868f, 0.18f, 0.1699f, 0.156f, 0.1468f, 0.1346f, 0.1133f, 0.0973f, 0.0846f, 0.0726f, 0.0652f, 0.0578f, 0.0621f, 0.0724f, 0.0827f, 0.0747f, 0.0563f, 0.0378f, 0.0209f, 0.0199f, 0.019f, 0.018f, 0.017f, },
    { 0.544f, 0.436f, 0.3843f, 0.3177f, 0.2739f, 0.228f, 0.2263f, 0.222f, 0.2044f, 0.1908f, 0.1826f, 0.1666f, 0.1414f, 0.1259f, 0.1095f, 0.0941f, 0.0811f, 0.0682f, 0.0578f, 0.0637f, 0.0697f, 0.0799f, 0.0922f, 0.1046f, 0.0928f, 0.067f, 0.0412f, 0.0179f, 0.0188f, 0.0198f, 0.0207f, 0.0216f, },
    { 0.5801f, 0.4935f, 0.4316f, 0.372f, 0.315f, 0.2409f, 0.2451f, 0.2438f, 0.2152f, 0.1948f, 0.1853f, 0.1634f, 0.1267f, 0.1051f, 0.0844f, 0.0748f, 0.0649f, 0.0519f, 0.043f, 0.0623f, 0.0816f, 0.0977f, 0.1121f, 0.1265f, 0.1108f, 0.0777f, 0.0446f, 0.0149f, 0.0177f, 0.0206f, 0.0234f, 0.0262f, },
    { 0.6028f, 0.5022f, 0.4045f, 0.3412f, 0.2889f, 0.2253f, 0.227f, 0.2233f, 0.1924f, 0.17f, 0.1588f, 0.1394f, 0.1108f, 0.0975f, 0.0838f, 0.0707f, 0.0582f, 0.0435f, 0.0321f, 0.0443f, 0.0566f, 0.0751f, 0.0969f, 0.1188f, 0.1078f, 0.0783f, 0.0487f, 0.0222f, 0.0242f, 0.0263f, 0.0284f, 0.0305f, },
    { 0.6228f, 0.5014f, 0.363f, 0.294f, 0.2498f, 0.2042f, 0.2019f, 0.1946f, 0.1632f, 0.1396f, 0.1266f, 0.1114f, 0.0945f, 0.0924f, 0.0881f, 0.0696f, 0.0534f, 0.0365f, 0.0219f, 0.0232f, 0.0244f, 0.0447f, 0.075f, 0.1053f, 0.1008f, 0.0769f, 0.053f, 0.0314f, 0.0322f, 0.033f, 0.0338f, 0.0346f, },
    { 0.6397f, 0.5367f, 0.3651f, 0.3003f, 0.2634f, 0.2292f, 0.222f, 0.2105f, 0.178f, 0.1512f, 0.1329f, 0.1157f, 0.1013f, 0.1048f, 0.1048f, 0.0805f, 0.0589f, 0.0357f, 0.0156f, 0.0166f, 0.0176f, 0.0389f, 0.0706f, 0.1024f, 0.0988f, 0.0756f, 0.0524f, 0.0314f, 0.0323f, 0.0333f, 0.0342f, 0.0351f, },
    { 0.6557f, 0.5932f, 0.3906f, 0.3356f, 0.3059f, 0.2801f, 0.2675f, 0.2511f, 0.2171f, 0.186f, 0.1602f, 0.1375f, 0.1207f, 0.1271f, 0.1291f, 0.0985f, 0.0703f, 0.0382f, 0.0109f, 0.0175f, 0.0241f, 0.0458f, 0.0754f, 0.105f, 0.0995f, 0.0743f, 0.0491f, 0.0264f, 0.0283f, 0.0301f, 0.0319f, 0.0338f, },
    { 0.6828f, 0.6329f, 0.43f, 0.3779f, 0.3528f, 0.3339f, 0.32f, 0.3025f, 0.2685f, 0.2345f, 0.2026f, 0.176f, 0.1584f, 0.1587f, 0.1543f, 0.1223f, 0.0927f, 0.0591f, 0.0305f, 0.0377f, 0.0449f, 0.0631f, 0.0871f, 0.1111f, 0.1044f, 0.0804f, 0.0565f, 0.0349f, 0.0363f, 0.0377f, 0.0391f, 0.0405f, },
    { 0.7165f, 0.6487f, 0.4766f, 0.4202f, 0.3962f, 0.3815f, 0.3707f, 0.3561f, 0.3236f, 0.2888f, 0.2532f, 0.2249f, 0.2083f, 0.1943f, 0.1762f, 0.148f, 0.1227f, 0.0951f, 0.0713f, 0.074f, 0.0767f, 0.088f, 0.1039f, 0.1197f, 0.1128f, 0.0931f, 0.0735f, 0.0556f, 0.0552f, 0.0549f, 0.0546f, 0.0543f, },
    { 0.7173f, 0.6484f, 0.5334f, 0.467f, 0.4426f, 0.4324f, 0.4199f, 0.4049f, 0.3784f, 0.3464f, 0.3097f, 0.2796f, 0.2605f, 0.2365f, 0.209f, 0.1831f, 0.1611f, 0.139f, 0.1186f, 0.1093f, 0.1f, 0.0993f, 0.103f, 0.1067f, 0.1019f, 0.0923f, 0.0826f, 0.0737f, 0.0717f, 0.0698f, 0.0679f, 0.0659f, },
    { 0.6723f, 0.626f, 0.5928f, 0.5109f, 0.484f, 0.4776f, 0.4573f, 0.4376f, 0.4221f, 0.3974f, 0.3631f, 0.3314f, 0.3055f, 0.2794f, 0.2503f, 0.2243f, 0.2036f, 0.1852f, 0.1654f, 0.1361f, 0.1069f, 0.0893f, 0.0778f, 0.0663f, 0.0663f, 0.0727f, 0.0791f, 0.0846f, 0.0816f, 0.0785f, 0.0755f, 0.0724f, },
    { 0.6316f, 0.6083f, 0.6233f, 0.5495f, 0.5287f, 0.5293f, 0.5013f, 0.476f, 0.4666f, 0.4487f, 0.4214f, 0.3939f, 0.3679f, 0.3393f, 0.3077f, 0.2819f, 0.2598f, 0.2374f, 0.2129f, 0.1734f, 0.134f, 0.106f, 0.0841f, 0.0622f, 0.0626f, 0.0754f, 0.0881f, 0.0993f, 0.0956f, 0.0919f, 0.0882f, 0.0845f, },
    { 0.6133f, 0.6047f, 0.598f, 0.5649f, 0.5607f, 0.5705f, 0.5379f, 0.5081f, 0.495f, 0.4802f, 0.4643f, 0.4479f, 0.4321f, 0.4013f, 0.367f, 0.3416f, 0.3145f, 0.2784f, 0.243f, 0.212f, 0.181f, 0.1567f, 0.1358f, 0.1149f, 0.1089f, 0.1108f, 0.1126f, 0.114f, 0.1106f, 0.1072f, 0.1037f, 0.1003f, },
    { 0.5983f, 0.6016f, 0.5802f, 0.5825f, 0.5955f, 0.6184f, 0.578f, 0.5413f, 0.5266f, 0.5156f, 0.5093f, 0.5028f, 0.4963f, 0.4703f, 0.4395f, 0.4117f, 0.3796f, 0.3333f, 0.2898f, 0.2654f, 0.2411f, 0.2191f, 0.1984f, 0.1777f, 0.1657f, 0.1578f, 0.15f, 0.1426f, 0.1391f, 0.1357f, 0.1323f, 0.1289f, },
    { 0.5992f, 0.6012f, 0.5916f, 0.5985f, 0.6231f, 0.665f, 0.6106f, 0.563f, 0.5539f, 0.5463f, 0.5411f, 0.5363f, 0.5326f, 0.5291f, 0.5189f, 0.4817f, 0.4462f, 0.4043f, 0.3645f, 0.3386f, 0.3128f, 0.2886f, 0.2654f, 0.2422f, 0.228f, 0.2182f, 0.2083f, 0.199f, 0.1946f, 0.1902f, 0.1859f, 0.1815f, },
    { 0.6055f, 0.6026f, 0.6029f, 0.6122f, 0.6441f, 0.6984f, 0.6419f, 0.5929f, 0.586f, 0.5813f, 0.5793f, 0.5777f, 0.5768f, 0.5908f, 0.5978f, 0.56f, 0.5257f, 0.4881f, 0.4518f, 0.4249f, 0.3981f, 0.372f, 0.3464f, 0.3207f, 0.3045f, 0.2927f, 0.2809f, 0.2697f, 0.2642f, 0.2587f, 0.2532f, 0.2477f, },
    { 0.6253f, 0.6085f, 0.6076f, 0.6104f, 0.6322f, 0.671f, 0.651f, 0.6314f, 0.6155f, 0.6097f, 0.6161f, 0.6203f, 0.6211f, 0.6266f, 0.6301f, 0.6202f, 0.6011f, 0.5645f, 0.5292f, 0.5037f, 0.4781f, 0.4519f, 0.4253f, 0.3988f, 0.382f, 0.3696f, 0.3573f, 0.3455f, 0.3389f, 0.3323f, 0.3257f, 0.3192f, },
    { 0.6497f, 0.6175f, 0.6087f, 0.606f, 0.6179f, 0.6413f, 0.659f, 0.6698f, 0.6443f, 0.6381f, 0.6551f, 0.6653f, 0.6655f, 0.666f, 0.6696f, 0.6867f, 0.6832f, 0.6498f, 0.6174f, 0.5923f, 0.5672f, 0.5412f, 0.5147f, 0.4882f, 0.4711f, 0.4582f, 0.4453f, 0.4329f, 0.4247f, 0.4165f, 0.4083f, 0.4001f, },
    { 0.675f, 0.6342f, 0.5892f, 0.5914f, 0.6044f, 0.6274f, 0.6536f, 0.6709f, 0.642f, 0.6396f, 0.6687f, 0.6806f, 0.6687f, 0.6873f, 0.7094f, 0.7237f, 0.7231f, 0.7012f, 0.6784f, 0.6492f, 0.6199f, 0.5958f, 0.5743f, 0.5529f, 0.5375f, 0.5246f, 0.5118f, 0.4991f, 0.4879f, 0.4768f, 0.4656f, 0.4544f, },
    { 0.7018f, 0.6533f, 0.5714f, 0.5779f, 0.5916f, 0.6137f, 0.6481f, 0.6717f, 0.6392f, 0.6408f, 0.6827f, 0.6973f, 0.6746f, 0.7112f, 0.7516f, 0.7631f, 0.7653f, 0.7551f, 0.7421f, 0.7099f, 0.6776f, 0.6556f, 0.6388f, 0.622f, 0.6081f, 0.595f, 0.5819f, 0.5687f, 0.5551f, 0.5415f, 0.5278f, 0.5142f, },
    { 0.7198f, 0.6772f, 0.5847f, 0.5862f, 0.5966f, 0.6151f, 0.6473f, 0.6688f, 0.6342f, 0.6386f, 0.6887f, 0.713f, 0.7015f, 0.7382f, 0.7779f, 0.7899f, 0.7929f, 0.7842f, 0.7739f, 0.7528f, 0.7317f, 0.7115f, 0.6917f, 0.672f, 0.6554f, 0.6398f, 0.6242f, 0.6091f, 0.5999f, 0.5907f, 0.5814f, 0.5722f, },
    { 0.739f, 0.7028f, 0.6022f, 0.5998f, 0.6067f, 0.6206f, 0.6498f, 0.6684f, 0.6321f, 0.6387f, 0.6956f, 0.7299f, 0.7317f, 0.768f, 0.8067f, 0.82f, 0.8245f, 0.818f, 0.8112f, 0.8027f, 0.7941f, 0.7763f, 0.7536f, 0.7309f, 0.7119f, 0.6939f, 0.6759f, 0.6592f, 0.6549f, 0.6505f, 0.6461f, 0.6417f, },
    { 0.739f, 0.7028f, 0.6219f, 0.6292f, 0.6364f, 0.6458f, 0.6706f, 0.6859f, 0.6518f, 0.6542f, 0.6995f, 0.7306f, 0.7404f, 0.7737f, 0.8097f, 0.8284f, 0.8372f, 0.8342f, 0.8311f, 0.8268f, 0.8225f, 0.8069f, 0.7856f, 0.7642f, 0.7473f, 0.7319f, 0.7165f, 0.7023f, 0.6985f, 0.6948f, 0.6911f, 0.6873f, },
    { 0.739f, 0.7037f, 0.6434f, 0.66f, 0.6674f, 0.6725f, 0.692f, 0.7032f, 0.6717f, 0.67f, 0.7037f, 0.7316f, 0.7497f, 0.7795f, 0.8125f, 0.8365f, 0.8497f, 0.8508f, 0.8518f, 0.8518f, 0.8518f, 0.8387f, 0.8186f, 0.7985f, 0.7837f, 0.771f, 0.7583f, 0.7465f, 0.7435f, 0.7405f, 0.7375f, 0.7346f, },
    { 0.739f, 0.7208f, 0.6701f, 0.6766f, 0.6843f, 0.695f, 0.6976f, 0.6958f, 0.6713f, 0.6742f, 0.7091f, 0.7385f, 0.7585f, 0.7816f, 0.8073f, 0.8288f, 0.8437f, 0.8529f, 0.861f, 0.8622f, 0.8633f, 0.8502f, 0.8295f, 0.8089f, 0.794f, 0.7813f, 0.7687f, 0.7572f, 0.7561f, 0.7551f, 0.7541f, 0.753f, },
    { 0.739f, 0.7404f, 0.7013f, 0.6966f, 0.7043f, 0.7211f, 0.705f, 0.6885f, 0.6712f, 0.6786f, 0.7149f, 0.746f, 0.7682f, 0.7842f, 0.8021f, 0.8211f, 0.8379f, 0.8556f, 0.8715f, 0.8741f, 0.8767f, 0.8635f, 0.8421f, 0.8206f, 0.8056f, 0.7933f, 0.781f, 0.7699f, 0.7709f, 0.7719f, 0.7729f, 0.7739f, },
    { 0.739f, 0.7479f, 0.723f, 0.7169f, 0.7222f, 0.7354f, 0.7211f, 0.7043f, 0.6757f, 0.6756f, 0.7092f, 0.7408f, 0.7674f, 0.7882f, 0.8115f, 0.8351f, 0.8518f, 0.863f, 0.8734f, 0.8792f, 0.8849f, 0.8706f, 0.8459f, 0.8211f, 0.8072f, 0.7985f, 0.7898f, 0.7819f, 0.7807f, 0.7796f, 0.7785f, 0.7773f, },
    { 0.739f, 0.757f, 0.7486f, 0.7407f, 0.7432f, 0.752f, 0.7396f, 0.7222f, 0.6809f, 0.6724f, 0.703f, 0.7351f, 0.7667f, 0.7929f, 0.8221f, 0.851f, 0.8677f, 0.8714f, 0.8757f, 0.8851f, 0.8946f, 0.8791f, 0.8507f, 0.8223f, 0.8096f, 0.8049f, 0.8002f, 0.7957f, 0.7921f, 0.7886f, 0.7851f, 0.7816f, },
    { 0.739f, 0.7645f, 0.7631f, 0.7524f, 0.7522f, 0.7575f, 0.7396f, 0.7188f, 0.6843f, 0.6791f, 0.7089f, 0.7409f, 0.7736f, 0.7944f, 0.8183f, 0.8475f, 0.865f, 0.8705f, 0.8767f, 0.8877f, 0.8986f, 0.886f, 0.861f, 0.8359f, 0.8222f, 0.814f, 0.8057f, 0.798f, 0.7955f, 0.7929f, 0.7904f, 0.7878f, },
    { 0.739f, 0.7733f, 0.7798f, 0.7659f, 0.7625f, 0.7637f, 0.7396f, 0.7148f, 0.6881f, 0.6868f, 0.7156f, 0.7476f, 0.7815f, 0.7962f, 0.814f, 0.8434f, 0.8619f, 0.8695f, 0.8778f, 0.8906f, 0.9033f, 0.8939f, 0.8728f, 0.8517f, 0.8367f, 0.8244f, 0.812f, 0.8007f, 0.7993f, 0.7979f, 0.7965f, 0.795f, },
    { 0.7444f, 0.7754f, 0.78f, 0.7723f, 0.7709f, 0.7725f, 0.7514f, 0.7282f, 0.6957f, 0.688f, 0.7101f, 0.7402f, 0.7787f, 0.7969f, 0.8181f, 0.8496f, 0.8691f, 0.8763f, 0.8842f, 0.8964f, 0.9086f, 0.8997f, 0.8799f, 0.86f, 0.8426f, 0.8257f, 0.8087f, 0.7932f, 0.791f, 0.7889f, 0.7868f, 0.7847f, },
    { 0.751f, 0.7779f, 0.78f, 0.78f, 0.7811f, 0.7831f, 0.7659f, 0.7448f, 0.7049f, 0.6893f, 0.7032f, 0.731f, 0.7751f, 0.7977f, 0.8233f, 0.8572f, 0.8779f, 0.8847f, 0.8921f, 0.9035f, 0.9149f, 0.9068f, 0.8884f, 0.8701f, 0.8497f, 0.8271f, 0.8046f, 0.7838f, 0.7808f, 0.7779f, 0.7749f, 0.7719f, },
};

static const float default_throttle_position[TABLE_PEDALS][TABLE_ROTATES_16] = {
    { 0.0f, 0.0f, 0.0f, 0.9f, 3.2f, 5.5f, 8.7f, 11.9f, 15.9f, 21.1f, 24.3f, 31.3f, 37.9f, 42.9f, 44.0f, 46.8f, },
    { 0.0f, 0.0f, 0.0f, 0.9f, 3.2f, 5.5f, 8.7f, 11.9f, 15.9f, 21.1f, 24.8f, 32.3f, 39.5f, 44.0f, 46.0f, 49.0f, },
    { 0.0f, 0.0f, 0.0f, 0.9f, 3.2f, 5.5f, 8.7f, 11.9f, 15.9f, 21.1f, 25.7f, 33.4f, 40.9f, 45.1f, 49.3f, 50.9f, },
    { 0.0f, 0.0f, 0.0f, 0.9f, 3.2f, 5.5f, 8.7f, 11.9f, 15.9f, 21.0f, 26.2f, 34.3f, 42.2f, 47.0f, 50.8f, 53.9f, },
    { 0.0f, 0.0f, 0.0f, 0.9f, 3.2f, 5.5f, 8.7f, 11.9f, 15.9f, 21.0f, 26.7f, 35.4f, 44.0f, 48.7f, 53.3f, 54.3f, },
    { 0.0f, 0.0f, 0.0f, 0.9f, 3.2f, 5.5f, 8.7f, 11.9f, 15.9f, 21.1f, 27.3f, 36.2f, 45.3f, 51.2f, 56.6f, 58.8f, },
    { 0.0f, 0.0f, 0.0f, 1.4f, 3.2f, 5.5f, 8.7f, 11.9f, 15.9f, 21.1f, 28.0f, 36.7f, 47.1f, 53.6f, 59.6f, 63.9f, },
    { 0.0f, 0.0f, 0.8f, 1.9f, 3.7f, 6.0f, 8.7f, 11.9f, 15.9f, 21.2f, 28.2f, 37.2f, 48.0f, 56.6f, 63.0f, 68.9f, },
    { 0.0f, 0.0f, 0.8f, 1.9f, 3.7f, 6.0f, 8.7f, 11.9f, 16.0f, 21.3f, 28.3f, 38.7f, 49.1f, 59.3f, 69.0f, 76.5f, },
    { 0.0f, 0.0f, 0.8f, 1.9f, 3.7f, 6.0f, 8.7f, 11.9f, 16.0f, 21.3f, 30.5f, 41.0f, 51.9f, 62.5f, 75.5f, 87.5f, },
    { 0.0f, 0.0f, 0.8f, 1.9f, 3.7f, 6.0f, 8.7f, 11.9f, 17.5f, 22.8f, 34.5f, 44.6f, 56.2f, 66.0f, 81.0f, 96.0f, },
    { 0.0f, 0.0f, 0.8f, 1.9f, 3.7f, 7.0f, 10.7f, 14.4f, 20.0f, 27.8f, 37.5f, 48.7f, 60.3f, 70.0f, 85.5f, 99.5f, },
    { 0.0f, 0.0f, 0.8f, 1.9f, 5.7f, 8.5f, 12.7f, 17.9f, 24.5f, 33.3f, 45.0f, 54.7f, 65.3f, 74.5f, 88.5f, 100.0f, },
    { 0.0f, 0.0f, 1.3f, 4.4f, 8.2f, 13.0f, 17.7f, 24.4f, 31.5f, 40.8f, 52.0f, 60.7f, 70.3f, 79.0f, 89.0f, 100.0f, },
    { 0.0f, 1.0f, 3.3f, 6.9f, 12.7f, 19.5f, 26.2f, 33.9f, 43.0f, 52.3f, 61.5f, 69.7f, 78.3f, 85.5f, 93.5f, 100.0f, },
    { 0.0f, 2.0f, 8.8f, 14.9f, 21.7f, 29.5f, 37.7f, 48.4f, 56.0f, 65.3f, 71.5f, 79.7f, 84.8f, 90.5f, 96.5f, 100.0f, },
};

static const float default_ignitions[TABLE_FILLING_32][TABLE_ROTATES_32] = {
    { 15.7f, 16.0f, 16.2f, 18.4f, 20.8f, 24.0f, 26.7f, 29.8f, 34.6f, 37.8f, 39.2f, 40.6f, 41.9f, 42.5f, 43.0f, 43.0f, 43.2f, 43.6f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.3f, 44.5f, 44.8f, 45.0f, },
    { 15.9f, 16.3f, 16.9f, 19.7f, 22.1f, 25.1f, 27.8f, 30.7f, 34.8f, 37.6f, 39.0f, 40.4f, 41.7f, 42.3f, 42.8f, 42.8f, 43.0f, 43.4f, 43.8f, 43.9f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.3f, 44.5f, 44.8f, 45.0f, },
    { 16.0f, 16.6f, 17.6f, 20.8f, 23.3f, 26.1f, 28.7f, 31.6f, 34.9f, 37.4f, 38.8f, 40.2f, 41.5f, 42.1f, 42.6f, 42.6f, 42.8f, 43.3f, 43.7f, 43.8f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.3f, 44.5f, 44.8f, 45.0f, },
    { 16.1f, 16.7f, 18.0f, 21.3f, 23.7f, 26.6f, 29.0f, 31.5f, 34.7f, 37.1f, 38.6f, 40.0f, 41.3f, 41.9f, 42.4f, 42.4f, 42.6f, 43.1f, 43.5f, 43.7f, 43.9f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.3f, 44.5f, 44.8f, 45.0f, },
    { 16.1f, 16.8f, 18.4f, 21.7f, 24.1f, 26.8f, 29.0f, 31.3f, 34.4f, 36.8f, 38.3f, 39.7f, 41.0f, 41.6f, 42.2f, 42.2f, 42.4f, 42.8f, 43.3f, 43.6f, 43.9f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.2f, 44.5f, 44.7f, 44.9f, },
    { 16.2f, 16.8f, 18.7f, 21.7f, 23.8f, 25.9f, 28.0f, 30.3f, 33.5f, 36.0f, 37.5f, 39.0f, 40.6f, 41.3f, 41.9f, 41.8f, 41.9f, 42.3f, 42.8f, 43.3f, 43.8f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.0f, 44.1f, 44.2f, 44.3f, 44.4f, },
    { 16.1f, 16.8f, 18.7f, 21.6f, 23.3f, 25.0f, 27.1f, 29.3f, 32.5f, 35.0f, 36.6f, 38.2f, 39.8f, 40.5f, 41.2f, 41.0f, 41.1f, 41.6f, 42.1f, 42.7f, 43.3f, 43.5f, 43.5f, 43.5f, 43.5f, 43.5f, 43.5f, 43.5f, 43.6f, 43.6f, 43.6f, 43.7f, },
    { 15.6f, 16.6f, 17.7f, 20.8f, 22.5f, 24.2f, 26.1f, 28.3f, 31.4f, 33.8f, 35.3f, 36.8f, 38.0f, 38.8f, 39.4f, 39.4f, 39.6f, 40.1f, 40.7f, 41.2f, 41.6f, 41.8f, 41.8f, 41.9f, 41.9f, 41.9f, 42.0f, 42.0f, 42.1f, 42.3f, 42.4f, 42.5f, },
    { 15.2f, 16.2f, 16.7f, 19.6f, 21.2f, 22.7f, 24.8f, 27.0f, 30.1f, 32.5f, 34.0f, 35.3f, 36.4f, 37.2f, 37.8f, 37.7f, 37.9f, 38.6f, 39.3f, 39.6f, 40.0f, 40.2f, 40.3f, 40.3f, 40.4f, 40.4f, 40.5f, 40.5f, 40.7f, 40.9f, 41.1f, 41.3f, },
    { 14.9f, 15.1f, 15.7f, 17.6f, 18.9f, 20.2f, 22.7f, 25.4f, 28.8f, 31.2f, 32.5f, 33.8f, 35.1f, 35.7f, 36.2f, 36.0f, 36.1f, 36.9f, 37.6f, 38.0f, 38.5f, 38.7f, 38.9f, 39.0f, 39.1f, 39.1f, 39.1f, 39.1f, 39.3f, 39.5f, 39.6f, 39.8f, },
    { 14.6f, 14.5f, 14.7f, 16.1f, 17.0f, 18.1f, 20.8f, 23.7f, 27.2f, 29.6f, 30.8f, 32.3f, 34.2f, 34.8f, 35.2f, 34.7f, 34.7f, 35.5f, 36.3f, 36.8f, 37.3f, 37.6f, 37.9f, 38.1f, 38.1f, 38.2f, 38.2f, 38.2f, 38.3f, 38.5f, 38.6f, 38.8f, },
    { 14.2f, 14.3f, 13.8f, 14.9f, 15.8f, 16.8f, 19.2f, 21.8f, 25.2f, 27.7f, 28.9f, 30.9f, 33.8f, 34.4f, 34.7f, 33.8f, 33.6f, 34.5f, 35.4f, 36.0f, 36.7f, 37.0f, 37.3f, 37.5f, 37.6f, 37.6f, 37.7f, 37.7f, 37.9f, 38.0f, 38.1f, 38.2f, },
    { 13.6f, 14.0f, 13.1f, 14.2f, 15.0f, 16.0f, 18.4f, 21.0f, 24.3f, 26.7f, 27.8f, 29.9f, 33.2f, 33.9f, 34.1f, 33.0f, 32.8f, 33.7f, 34.5f, 35.3f, 36.0f, 36.5f, 36.7f, 37.0f, 37.1f, 37.2f, 37.3f, 37.3f, 37.5f, 37.6f, 37.7f, 37.9f, },
    { 12.9f, 13.6f, 12.5f, 13.8f, 14.7f, 15.9f, 18.4f, 21.0f, 24.2f, 26.4f, 27.5f, 29.4f, 32.4f, 33.2f, 33.4f, 32.4f, 32.1f, 32.9f, 33.6f, 34.5f, 35.4f, 35.9f, 36.3f, 36.6f, 36.8f, 36.8f, 36.9f, 36.9f, 37.1f, 37.3f, 37.5f, 37.7f, },
    { 12.7f, 13.3f, 12.2f, 13.3f, 14.3f, 15.5f, 18.0f, 20.6f, 23.9f, 26.2f, 26.9f, 28.9f, 32.2f, 32.7f, 32.8f, 31.8f, 31.6f, 32.4f, 33.1f, 34.1f, 35.0f, 35.6f, 35.9f, 36.2f, 36.4f, 36.5f, 36.6f, 36.7f, 37.0f, 37.2f, 37.5f, 37.8f, },
    { 12.8f, 13.0f, 12.0f, 12.8f, 13.7f, 15.0f, 17.4f, 19.9f, 23.6f, 25.9f, 26.3f, 28.3f, 32.2f, 32.3f, 32.1f, 31.3f, 31.2f, 32.0f, 32.9f, 33.8f, 34.8f, 35.3f, 35.6f, 35.9f, 36.1f, 36.2f, 36.3f, 36.5f, 36.9f, 37.3f, 37.6f, 38.0f, },
    { 13.0f, 12.9f, 12.1f, 12.7f, 13.5f, 14.5f, 16.9f, 19.4f, 22.6f, 24.7f, 25.4f, 27.8f, 32.1f, 32.4f, 32.1f, 31.2f, 30.9f, 31.6f, 32.3f, 33.4f, 34.4f, 35.0f, 35.3f, 35.6f, 35.8f, 35.9f, 36.1f, 36.3f, 36.7f, 37.2f, 37.7f, 38.2f, },
    { 13.2f, 12.8f, 12.2f, 12.8f, 13.3f, 14.0f, 16.5f, 19.0f, 21.3f, 23.2f, 24.3f, 27.2f, 32.0f, 32.5f, 32.5f, 31.3f, 30.8f, 31.2f, 31.7f, 32.9f, 34.0f, 34.7f, 35.0f, 35.3f, 35.5f, 35.6f, 35.8f, 36.0f, 36.6f, 37.1f, 37.7f, 38.3f, },
    { 12.9f, 12.6f, 12.4f, 12.9f, 13.3f, 13.7f, 16.2f, 18.7f, 21.3f, 23.2f, 24.3f, 27.2f, 32.3f, 33.1f, 33.3f, 31.5f, 30.6f, 31.0f, 31.5f, 32.5f, 33.6f, 34.2f, 34.5f, 34.8f, 35.1f, 35.3f, 35.5f, 35.7f, 36.2f, 36.6f, 37.1f, 37.5f, },
    { 12.5f, 12.3f, 12.6f, 13.0f, 13.2f, 13.5f, 15.8f, 18.3f, 21.5f, 23.6f, 24.4f, 27.3f, 32.7f, 33.9f, 34.1f, 31.7f, 30.5f, 30.9f, 31.3f, 32.3f, 33.2f, 33.8f, 34.1f, 34.4f, 34.6f, 34.9f, 35.2f, 35.5f, 35.7f, 36.0f, 36.3f, 36.5f, },
    { 12.6f, 12.7f, 13.1f, 13.2f, 13.4f, 13.6f, 15.8f, 18.3f, 21.4f, 23.5f, 24.4f, 27.3f, 32.8f, 33.8f, 34.0f, 31.7f, 30.5f, 30.6f, 30.9f, 31.8f, 32.8f, 33.3f, 33.6f, 33.9f, 34.1f, 34.3f, 34.4f, 34.6f, 34.9f, 35.3f, 35.6f, 35.9f, },
    { 12.8f, 13.2f, 13.7f, 13.5f, 13.5f, 13.7f, 15.9f, 18.3f, 21.3f, 23.3f, 24.3f, 27.3f, 32.8f, 33.7f, 33.7f, 31.7f, 30.5f, 30.4f, 30.3f, 31.3f, 32.4f, 32.9f, 33.1f, 33.4f, 33.5f, 33.6f, 33.6f, 33.7f, 34.1f, 34.5f, 34.9f, 35.3f, },
    { 12.6f, 12.9f, 14.0f, 13.9f, 13.9f, 13.8f, 16.0f, 18.5f, 21.5f, 23.6f, 24.3f, 27.3f, 32.9f, 33.7f, 33.5f, 31.3f, 30.1f, 29.8f, 29.7f, 30.8f, 31.9f, 32.4f, 32.5f, 32.7f, 32.8f, 32.9f, 33.0f, 33.2f, 33.6f, 34.1f, 34.6f, 35.0f, },
    { 12.5f, 12.7f, 14.2f, 14.4f, 14.2f, 13.8f, 16.2f, 18.7f, 21.8f, 23.8f, 24.4f, 27.3f, 33.0f, 33.6f, 33.3f, 31.0f, 29.6f, 29.3f, 29.1f, 30.3f, 31.5f, 31.9f, 31.9f, 32.0f, 32.1f, 32.3f, 32.4f, 32.6f, 33.2f, 33.7f, 34.2f, 34.8f, },
    { 12.2f, 13.1f, 14.1f, 14.4f, 14.5f, 14.6f, 17.0f, 19.5f, 22.4f, 24.1f, 24.4f, 27.1f, 32.5f, 33.2f, 33.1f, 30.6f, 29.1f, 28.6f, 28.4f, 29.6f, 30.8f, 31.2f, 31.3f, 31.5f, 31.6f, 31.8f, 32.1f, 32.3f, 32.9f, 33.4f, 33.9f, 34.5f, },
    { 11.9f, 13.3f, 14.0f, 14.4f, 14.8f, 15.2f, 17.7f, 20.2f, 22.7f, 24.3f, 24.5f, 26.9f, 32.0f, 32.8f, 32.7f, 30.2f, 28.7f, 28.1f, 27.7f, 28.9f, 30.1f, 30.7f, 30.8f, 31.0f, 31.2f, 31.5f, 31.8f, 32.0f, 32.6f, 33.1f, 33.6f, 34.1f, },
    { 11.3f, 12.5f, 13.9f, 14.3f, 14.7f, 15.3f, 17.7f, 20.0f, 22.1f, 23.6f, 24.3f, 26.7f, 31.3f, 32.1f, 32.2f, 29.9f, 28.5f, 28.0f, 27.6f, 28.7f, 29.9f, 30.4f, 30.5f, 30.7f, 31.0f, 31.3f, 31.6f, 32.0f, 32.4f, 32.8f, 33.3f, 33.7f, },
    { 10.9f, 11.9f, 13.8f, 14.1f, 14.6f, 15.4f, 17.6f, 19.8f, 21.5f, 23.0f, 24.1f, 26.5f, 30.6f, 31.4f, 31.5f, 29.6f, 28.4f, 27.9f, 27.5f, 28.5f, 29.6f, 30.1f, 30.2f, 30.4f, 30.7f, 31.1f, 31.5f, 31.8f, 32.2f, 32.6f, 33.0f, 33.3f, },
    { 11.3f, 11.8f, 13.5f, 14.0f, 14.6f, 15.4f, 17.5f, 19.5f, 21.1f, 22.6f, 23.9f, 26.3f, 29.9f, 30.6f, 30.7f, 29.3f, 28.4f, 27.8f, 27.4f, 28.4f, 29.3f, 29.8f, 29.9f, 30.0f, 30.3f, 30.7f, 31.1f, 31.5f, 31.9f, 32.3f, 32.7f, 33.1f, },
    { 11.6f, 11.8f, 13.3f, 13.9f, 14.6f, 15.4f, 17.4f, 19.3f, 20.8f, 22.4f, 23.8f, 26.1f, 29.4f, 30.0f, 30.2f, 29.2f, 28.4f, 27.7f, 27.3f, 28.2f, 29.2f, 29.6f, 29.7f, 29.8f, 30.0f, 30.4f, 30.8f, 31.2f, 31.7f, 32.1f, 32.5f, 32.9f, },
    { 11.6f, 11.8f, 13.3f, 13.9f, 14.6f, 15.4f, 17.4f, 19.3f, 20.8f, 22.4f, 23.8f, 26.1f, 29.4f, 30.0f, 30.2f, 29.2f, 28.4f, 27.7f, 27.3f, 28.2f, 29.2f, 29.6f, 29.7f, 29.8f, 30.0f, 30.4f, 30.8f, 31.2f, 31.7f, 32.1f, 32.5f, 32.9f, },
    { 11.6f, 11.8f, 13.3f, 13.9f, 14.6f, 15.4f, 17.4f, 19.3f, 20.8f, 22.4f, 23.8f, 26.1f, 29.4f, 30.0f, 30.2f, 29.2f, 28.4f, 27.7f, 27.3f, 28.2f, 29.2f, 29.6f, 29.7f, 29.8f, 30.0f, 30.4f, 30.8f, 31.2f, 31.7f, 32.1f, 32.5f, 32.9f, },
};

static const float default_fuel_mixtures[TABLE_FILLING_16][TABLE_FILLING_16] = {
    { 13.6f, 13.7f, 13.8f, 13.9f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, },
    { 13.6f, 13.7f, 13.8f, 13.9f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, },
    { 13.6f, 13.7f, 13.8f, 13.9f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, },
    { 13.6f, 13.7f, 13.8f, 13.9f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, 14.0f, },
    { 13.6f, 13.7f, 13.8f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, },
    { 13.6f, 13.7f, 13.8f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, 13.9f, },
    { 13.6f, 13.7f, 13.8f, 13.8f, 13.8f, 13.8f, 13.8f, 13.8f, 13.8f, 13.8f, 13.8f, 13.8f, 13.8f, 13.8f, 13.8f, 13.8f, },
    { 13.5f, 13.7f, 13.7f, 13.7f, 13.7f, 13.7f, 13.7f, 13.7f, 13.7f, 13.7f, 13.7f, 13.7f, 13.7f, 13.7f, 13.7f, 13.7f, },
    { 13.4f, 13.5f, 13.5f, 13.5f, 13.5f, 13.5f, 13.5f, 13.5f, 13.5f, 13.5f, 13.5f, 13.5f, 13.5f, 13.5f, 13.5f, 13.5f, },
    { 13.3f, 13.4f, 13.4f, 13.4f, 13.4f, 13.4f, 13.4f, 13.4f, 13.4f, 13.4f, 13.4f, 13.4f, 13.4f, 13.4f, 13.4f, 13.4f, },
    { 13.2f, 13.2f, 13.2f, 13.2f, 13.2f, 13.2f, 13.2f, 13.2f, 13.2f, 13.2f, 13.2f, 13.2f, 13.2f, 13.2f, 13.2f, 13.2f, },
    { 13.0f, 13.0f, 13.0f, 13.0f, 13.0f, 13.0f, 13.0f, 13.0f, 13.0f, 13.0f, 13.0f, 13.0f, 13.0f, 13.0f, 13.0f, 13.0f, },
    { 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, },
    { 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, },
    { 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, },
    { 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, 12.8f, },
};

static const float default_injection_phase[TABLE_FILLING_16][TABLE_ROTATES_16] = {
    { 156, 156, 157, 157, 157, 156, 156, 156, 160, 171, 196, 227, 254, 268, 274, 276, },
    { 157, 157, 158, 158, 158, 160, 161, 164, 170, 183, 206, 237, 262, 277, 284, 287, },
    { 159, 159, 160, 160, 161, 165, 169, 174, 182, 198, 220, 248, 274, 288, 297, 301, },
    { 162, 163, 163, 164, 165, 172, 179, 187, 198, 216, 238, 265, 288, 304, 313, 318, },
    { 171, 172, 173, 175, 177, 186, 195, 205, 219, 239, 260, 286, 308, 323, 332, 337, },
    { 182, 183, 185, 188, 191, 203, 215, 228, 245, 267, 288, 312, 332, 346, 355, 360, },
    { 197, 199, 202, 207, 212, 227, 242, 258, 278, 302, 321, 342, 360, 372, 381, 386, },
    { 218, 221, 226, 233, 241, 259, 278, 298, 319, 344, 361, 378, 392, 403, 411, 416, },
    { 243, 246, 253, 262, 274, 297, 319, 342, 366, 390, 404, 417, 429, 437, 444, 448, },
    { 264, 268, 276, 289, 304, 333, 359, 384, 409, 434, 446, 457, 465, 473, 480, 483, },
    { 278, 282, 293, 307, 329, 361, 391, 419, 447, 473, 487, 501, 509, 516, 527, 538, },
    { 289, 293, 303, 323, 344, 381, 412, 441, 469, 495, 507, 516, 523, 529, 539, 550, },
    { 300, 304, 315, 333, 359, 394, 425, 454, 481, 507, 519, 529, 536, 541, 551, 557, },
    { 313, 317, 326, 344, 368, 403, 432, 460, 487, 512, 525, 534, 541, 546, 553, 561, },
    { 326, 329, 338, 354, 378, 409, 437, 463, 489, 514, 526, 535, 542, 548, 557, 565, },
    { 337, 339, 347, 363, 385, 414, 441, 466, 490, 514, 527, 536, 542, 548, 557, 568, },
};

static const float default_enrichment_rate_start_load[TABLE_ENRICHMENT_PERCENTS] = {
    0.0f, 5.0f, 10.0f, 15.0f, 25.0f, 40.0f, 60.0f, 80.0f
};

static const float default_enrichment_rate_load_derivative[TABLE_ENRICHMENT_PERCENTS] = {
    0, 500, 1200, 2000, 3200, 4500, 6000, 8000,
};

static const float default_enrichment_rate[TABLE_ENRICHMENT_PERCENTS][TABLE_ENRICHMENT_PERCENTS] = {
    { 0.00f, 0.31f, 0.55f, 0.70f, 0.80f, 0.85f, 0.95f, 1.00f, },
    { 0.00f, 0.23f, 0.46f, 0.60f, 0.70f, 0.75f, 0.80f, 0.90f, },
    { 0.00f, 0.15f, 0.34f, 0.45f, 0.50f, 0.55f, 0.60f, 0.75f, },
    { 0.00f, 0.09f, 0.21f, 0.34f, 0.40f, 0.46f, 0.53f, 0.65f, },
    { 0.00f, 0.00f, 0.04f, 0.20f, 0.28f, 0.35f, 0.40f, 0.45f, },
    { 0.00f, 0.00f, 0.00f, 0.08f, 0.16f, 0.21f, 0.24f, 0.27f, },
    { 0.00f, 0.00f, 0.00f, 0.01f, 0.04f, 0.06f, 0.08f, 0.09f, },
    { 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, },
};

static const float default_enrichment_tps_selection[TABLE_ENRICHMENT_PERCENTS][TABLE_ENRICHMENT_PERCENTS] = {
    { 0.00f, 0.40f, 0.60f, 0.85f, 0.97f, 1.00f, 1.00f, 1.00f, },
    { 0.00f, 0.36f, 0.54f, 0.74f, 0.94f, 0.98f, 0.99f, 1.00f, },
    { 0.00f, 0.28f, 0.50f, 0.66f, 0.85f, 0.95f, 0.98f, 1.00f, },
    { 0.00f, 0.21f, 0.44f, 0.57f, 0.79f, 0.89f, 0.96f, 1.00f, },
    { 0.00f, 0.14f, 0.37f, 0.50f, 0.69f, 0.79f, 0.89f, 1.00f, },
    { 0.00f, 0.09f, 0.28f, 0.40f, 0.59f, 0.71f, 0.80f, 0.88f, },
    { 0.00f, 0.04f, 0.17f, 0.31f, 0.48f, 0.60f, 0.70f, 0.75f, },
    { 0.00f, 0.00f, 0.10f, 0.24f, 0.36f, 0.50f, 0.58f, 0.62f, },
};

static const float default_enrichment_accel_dead_band[TABLE_ROTATES_16] = {
    37000, 39000, 42000, 45000, 50000, 58000, 68000, 78000,
    88000, 100000, 109000, 124000, 141000, 164000, 197000, 220000,
};

static const float default_enrichment_sync_amount[TABLE_ROTATES_16] = {
    0.50f, 0.50f, 0.50f, 0.55f, 0.60f, 0.65f, 0.73f, 0.80f,
    0.83f, 0.85f, 0.87f, 0.89f, 0.91f, 0.93f, 0.97f, 1.00f,
};

static const float default_enrichment_async_amount[TABLE_ROTATES_16] = {
    0.30f, 0.30f, 0.30f, 0.32f, 0.35f, 0.39f, 0.43f, 0.48f,
    0.51f, 0.53f, 0.55f, 0.58f, 0.65f, 0.76f, 0.80f, 0.80f,
};

static const float default_enrichment_ign_corr[TABLE_ROTATES_16][TABLE_ENRICHMENT_PERCENTS] = {
    { -4.0f, -3.9f, -3.7f, -3.6f, -3.3f, -2.9f, -2.4f, -2.0f, },
    { -4.0f, -3.9f, -3.7f, -3.6f, -3.3f, -2.9f, -2.4f, -2.0f, },
    { -4.0f, -3.9f, -3.7f, -3.6f, -3.3f, -2.9f, -2.4f, -2.0f, },
    { -4.0f, -3.9f, -3.7f, -3.5f, -3.3f, -2.9f, -2.4f, -2.0f, },
    { -3.8f, -3.7f, -3.5f, -3.4f, -3.2f, -2.8f, -2.3f, -1.9f, },
    { -3.5f, -3.5f, -3.2f, -3.1f, -3.0f, -2.6f, -2.2f, -1.8f, },
    { -3.2f, -3.2f, -2.9f, -2.9f, -2.8f, -2.5f, -2.0f, -1.7f, },
    { -2.9f, -2.9f, -2.6f, -2.6f, -2.5f, -2.3f, -1.9f, -1.6f, },
    { -2.4f, -2.4f, -2.3f, -2.2f, -2.2f, -2.0f, -1.8f, -1.5f, },
    { -3.0f, -3.0f, -2.9f, -2.7f, -2.5f, -2.3f, -2.1f, -1.9f, },
    { -2.4f, -2.4f, -2.3f, -2.2f, -2.2f, -2.0f, -2.0f, -1.8f, },
    { -2.0f, -2.0f, -1.9f, -1.9f, -1.6f, -1.4f, -1.4f, -1.3f, },
    { -1.0f, -1.0f, -0.8f, -0.6f, -0.7f, -0.7f, -0.9f, -1.2f, },
    { -0.2f, -0.2f, -0.3f, -0.4f, -0.5f, -0.6f, -0.9f, -1.2f, },
    { 0.0f, -0.1f, -0.1f, -0.2f, -0.3f, -0.5f, -0.8f, -1.1f, },
    { 0.0f, -0.1f, -0.1f, -0.2f, -0.3f, -0.5f, -0.8f, -1.0f, },
};


static const float default_enrichment_temp_mult[TABLE_TEMPERATURES] = {
    2.00f, 1.93f, 1.79f, 1.68f, 1.55f, 1.44f, 1.36f, 1.30f,
    1.24f, 1.19f, 1.14f, 1.12f, 1.10f, 1.10f, 1.10f, 1.10f,
};

static const float default_enrichment_injection_phase[TABLE_ROTATES_16] = {
    0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0,
};

static const float default_ignition_time_rpm_mult[TABLE_ROTATES_16] = {
    4.0f, 1.7f, 1.1f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f
};

static const float default_voltages[TABLE_VOLTAGES] = {
    0.0f, 6.0f, 8.0f, 10.0f, 12.0f, 14.0f, 16.0f, 25.0f
};

static const float default_ignition_time[TABLE_VOLTAGES] = {
    5700, 4500, 3200, 2500, 2100, 1800, 1600, 1000
};

static const float default_injector_lag[TABLE_VOLTAGES] = {
    5.00f, 3.00f, 2.18f, 1.67f, 1.18f, 0.91f, 0.63f, 0.03f,
};

static const float default_engine_temps[TABLE_TEMPERATURES] = {
    -20, -10, 0, 10, 20, 30, 40, 50,
    60, 70, 80, 90, 100, 110, 120, 130
};

static const float default_warmup_mixtures[TABLE_TEMPERATURES] = {
    13.4f, 13.5f, 13.6f, 13.7f, 13.8f, 13.9f, 14.4f, 14.7f,
    14.7f, 14.6f, 14.6f, 14.6f, 14.6f, 14.0f, 13.6f, 13.0f
};

static const float default_warmup_mix_koffs[TABLE_TEMPERATURES] = {
    0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f,
    0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f,
};

static const float default_warmup_mix_corrs[TABLE_TEMPERATURES] = {
    0.06f, 0.06f, 0.05f, 0.05f, 0.04f, 0.03f, 0.02f, 0.01f,
    0.01f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f,
};

static const float default_cold_start_idle_corrs[TABLE_TEMPERATURES] = {
    0.30f, 0.30f, 0.30f, 0.28f, 0.24f, 0.18f, 0.17f, 0.13f,
    0.09f, 0.05f, 0.04f, 0.03f, 0.01f, 0.01f, 0.01f, 0.01f,
};

static const float default_cold_start_idle_times[TABLE_TEMPERATURES] = {
    25, 24, 23, 22, 18, 13, 7, 5,
    4, 3, 2, 1, 1, 1, 1, 1,
};

static const float default_start_tps_corrs[TABLE_THROTTLES_16] = {
    1.00f, 1.00f, 1.00f, 1.00f, 0.98f, 0.94f, 0.90f, 0.86f,
    0.81f, 0.77f, 0.72f, 0.65f, 0.56f, 0.38f, 0.00f, 0.00f,
};

static const float default_start_async_filling[TABLE_TEMPERATURES] = {
    0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0,
};

static const float default_start_large_filling[TABLE_TEMPERATURES] = {
    147.1f, 139.7f, 132.4f, 117.6f, 95.6f, 73.5f, 58.8f, 47.8f,
    40.4f, 36.8f, 33.1f, 31.6f, 31.6f, 31.6f, 31.6f, 31.6f
};

static const float default_start_small_filling[TABLE_TEMPERATURES] = {
    62.5f, 61.0f, 53.7f, 46.3f, 36.8f, 30.9f, 27.2f, 25.0f,
    23.5f, 22.8f, 22.8f, 22.8f, 22.8f, 22.8f, 22.8f, 22.8f
};

static const float default_start_filling_time[TABLE_TEMPERATURES] = {
    1.3f, 1.3f, 1.2f, 1.1f, 0.9f, 0.8f, 0.6f, 0.5f,
    0.4f, 0.3f, 0.3f, 0.2f, 0.1f, 0.1f, 0.1f, 0.1f,
};

static const float default_start_injection_phase[TABLE_TEMPERATURES] = {
    50, 50, 60, 70, 80, 90, 100, 100,
    100, 100, 100, 100, 100, 100, 100, 100,
};

static const float default_start_ignition[TABLE_TEMPERATURES] = {
    10.0f, 10.0f, 10.0f, 10.0f, 10.0f, 10.0f, 10.0f, 10.0f,
    10.0f, 10.0f, 10.0f, 10.0f, 10.0f, 10.0f, 10.0f, 10.0f
};

static const float default_start_idle_valve_pos[TABLE_TEMPERATURES] = {
    100.0f, 100.0f, 95.0f, 90.0f, 85.0f, 80.0f, 75.0f, 70.0f,
    65.0f, 60.0f, 55.0f, 55.0f, 55.0f, 50.0f, 50.0f, 50.0f,
};

static const float default_idle_wish_rotates[TABLE_TEMPERATURES] = {
    1560, 1560, 1520, 1500, 1460, 1420, 1380, 1350,
    1300, 1280, 1250, 1250, 1250, 1290, 1340, 1400,
};

static const float default_idle_valve_position[TABLE_TEMPERATURES] = {
    70, 70, 70, 70, 65, 60, 55, 55,
    53, 50, 50, 50, 50, 50, 50, 50,
};

static const float default_idle_valve_econ_position[TABLE_ROTATES_32] = {
    60, 59, 57, 55, 52, 49, 47, 45,
    42, 37, 35, 35, 35, 35, 35, 35,
    35, 35, 35, 35, 35, 35, 35, 35,
    35, 35, 35, 35, 38, 45, 49, 50,
};

static const float default_idle_wish_massair[TABLE_TEMPERATURES] = {
    27.0f, 26.0f, 25.0f, 24.0f, 23.3f, 21.6f, 19.9f, 18.0f,
    17.4f, 16.7f, 16.0f, 16.0f, 16.0f, 17.0f, 18.0f, 18.5f,
};

static const float default_idle_wish_ignition_static[TABLE_ROTATES_16] = {
    14.0f, 16.0f, 18.0f, 21.0f, 25.0f, 25.7f, 23.0f, 20.0f,
    17.0f, 14.0f, 11.0f, 10.0f, 10.0f, 11.0f, 13.0f, 17.0f,
};

static const float default_idle_wish_ignition[TABLE_TEMPERATURES] = {
    20.0f, 20.0f, 20.0f, 20.0f, 18.9f, 15.0f, 12.7f, 11.0f,
    10.0f, 9.0f, 8.0f, 8.0f, 9.0f, 10.8f, 12.3f, 14.0f,
};

static const float default_speeds[TABLE_SPEEDS] = {
    0, 3, 10, 20, 30, 40, 50, 60,
    70, 80, 90, 100, 110, 120, 130, 140
};

static const float default_idle_rpm_shift[TABLE_SPEEDS] = {
    0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0,
};

static const float default_knock_noise_level[TABLE_ROTATES_32] = {
    1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f,
    1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.01f, 1.02f, 1.04f,
    1.06f, 1.08f, 1.11f, 1.15f, 1.19f, 1.22f, 1.26f, 1.29f,
    1.33f, 1.37f, 1.41f, 1.45f, 1.49f, 1.53f, 1.56f, 1.60f,
};

static const float default_knock_threshold[TABLE_ROTATES_32] = {
    1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f,
    1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f,
    1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f,
    1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f,
};

static const float default_knock_detect_phase_start[TABLE_ROTATES_32] = {
    -19, -23, -27, -30, -32, -35, -37, -39,
    -41, -43, -44, -46, -47, -48, -48, -49,
    -49, -50, -50, -50, -50, -50, -50, -50,
    -50, -50, -50, -50, -50, -50, -50, -50
};

static const float default_knock_detect_phase_end[TABLE_ROTATES_32] = {
    2, 3, 4, 6, 7, 8, 9, 9,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10
};

static const float default_knock_integrator_time[TABLE_ROTATES_32] = {
    11, 11, 11, 11, 11, 11, 11, 11,
    11, 11, 11, 11, 11, 11, 11, 11,
    11, 11, 11, 11, 11, 11, 11, 11,
    11, 11, 11, 11, 11, 11, 11, 11,
};

static const float default_knock_filter_frequency[TABLE_ROTATES_32] = {
    41, 41, 41, 41, 41, 41, 41, 41,
    41, 41, 41, 41, 42, 42, 42, 42,
    42, 42, 42, 42, 42, 42, 43, 43,
    43, 43, 43, 43, 43, 43, 43, 43
};

static const float default_knock_gain[TABLE_ROTATES_32] = {
    1, 1, 1, 2, 3, 4, 5, 7,
    11, 14, 17, 21, 28, 31, 34, 36,
    40, 44, 47, 50, 53, 55, 56, 58,
    58, 59, 59, 60, 60, 60, 60, 60
};

static const float default_knock_zone[TABLE_FILLING_16][TABLE_ROTATES_16] = {
    { 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, },
    { 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, },
    { 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, },
    { 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, },
    { 0.50f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, },
    { 1.00f, 0.50f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, },
    { 1.00f, 1.00f, 0.50f, 0.50f, 0.50f, 0.50f, 0.50f, 0.50f, 0.50f, 0.50f, 0.50f, 0.50f, 0.50f, 0.50f, 0.50f, 0.50f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, },
};

static const float default_knock_cy_level_multiplier[ECU_CYLINDERS_COUNT][TABLE_ROTATES_32] = {
    { 1.08f, 1.36f, 1.27f, 1.50f, 1.56f, 1.56f, 1.46f, 1.36f, 1.31f, 1.31f, 1.38f, 1.41f, 1.37f, 1.36f, 1.33f, 1.24f, 1.17f, 1.12f, 1.08f, 1.07f, 1.05f, 1.05f, 1.06f, 1.07f, 1.06f, 1.05f, 1.03f, 1.02f, 1.01f, 1.01f, 1.00f, 1.00f, },
    { 1.04f, 1.18f, 1.12f, 1.10f, 1.07f, 1.03f, 1.05f, 1.07f, 1.06f, 1.07f, 1.11f, 1.13f, 1.12f, 1.14f, 1.14f, 1.06f, 1.01f, 0.97f, 0.94f, 0.97f, 0.99f, 1.00f, 0.99f, 0.99f, 0.99f, 0.99f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, },
    { 1.06f, 1.21f, 1.13f, 1.22f, 1.21f, 1.16f, 1.09f, 1.03f, 1.05f, 1.05f, 1.04f, 1.01f, 0.97f, 1.02f, 1.06f, 1.05f, 1.03f, 1.00f, 0.98f, 0.99f, 1.01f, 1.01f, 1.00f, 1.00f, 1.00f, 1.00f, 1.01f, 1.01f, 1.01f, 1.00f, 1.00f, 1.00f, },
    { 1.05f, 1.21f, 1.15f, 1.24f, 1.28f, 1.30f, 1.28f, 1.26f, 1.25f, 1.28f, 1.36f, 1.41f, 1.44f, 1.43f, 1.40f, 1.33f, 1.27f, 1.20f, 1.13f, 1.10f, 1.07f, 1.06f, 1.07f, 1.07f, 1.06f, 1.05f, 1.03f, 1.02f, 1.01f, 1.01f, 1.00f, 1.00f, },
};

static const float default_air_temps[TABLE_TEMPERATURES] = {
    -40, -30, -20, -10, -5, 0, 5, 10,
    15, 20, 30, 40, 50, 60, 70, 80
};

static const float default_air_temp_mix_corrs[TABLE_TEMPERATURES][TABLE_FILLING_16] = {
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
};

static const float default_air_temp_ign_corrs[TABLE_TEMPERATURES][TABLE_FILLING_16] = {
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 1.5f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 1.5f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 1.5f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 1.5f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, 2.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 1.0f, 1.5f, 1.5f, 1.5f, 1.5f, 1.5f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 1.0f, 1.5f, 1.5f, 1.5f, 1.5f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 1.0f, 1.0f, 1.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, -1.0f, -1.0f, -1.0f, -1.0f, -1.0f, -1.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, -0.5f, -0.5f, -0.5f, -1.0f, -1.0f, -1.0f, -1.5f, -1.5f, -1.5f, -1.5f, -1.5f, -1.5f, },
    { 0.0f, 0.0f, 0.0f, -0.5f, -0.5f, -1.0f, -1.0f, -2.0f, -2.0f, -2.0f, -2.3f, -2.3f, -2.3f, -2.3f, -2.3f, -2.3f, },
    { 0.0f, 0.0f, -0.5f, -0.5f, -1.0f, -2.0f, -2.5f, -2.5f, -2.5f, -3.0f, -3.0f, -3.0f, -3.0f, -3.0f, -3.0f, -3.0f, },
};

static const float default_engine_temp_mix_corrs[TABLE_TEMPERATURES][TABLE_FILLING_16] = {
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f },
};

static const float default_engine_temp_ign_corrs[TABLE_TEMPERATURES][TABLE_FILLING_16] = {
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, },
    { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, -1.0f, -1.0f, -1.0f, -1.0f, -1.0f, -1.0f, -1.0f, -1.0f, -1.0f, -1.0f, },
    { 0.0f, 0.0f, 0.1f, 0.0f, -1.0f, -1.0f, -1.0f, -1.0f, -1.0f, -1.0f, -1.0f, -1.0f, -2.0f, -2.0f, -2.0f, -2.0f, },
    { 0.0f, 0.0f, -1.0f, -1.0f, -2.0f, -3.0f, -4.0f, -4.0f, -4.0f, -4.0f, -4.0f, -4.0f, -4.0f, -4.0f, -4.0f, -4.0f, },
    { 0.0f, -1.0f, -2.0f, -3.0f, -4.0f, -5.0f, -5.0f, -5.0f, -5.0f, -5.0f, -5.0f, -5.0f, -5.0f, -5.0f, -5.0f, -5.0f, },
    { -2.0f, -3.0f, -4.0f, -5.0f, -6.0f, -6.0f, -6.0f, -6.0f, -6.0f, -6.0f, -6.0f, -6.0f, -6.0f, -6.0f, -6.0f, -6.0f, },
};

static const float default_idle_pids_rpm_koffs[TABLE_ROTATES_16] = {
    0.45f, 0.53f, 0.61f, 0.69f, 0.77f, 0.85f, 0.93f, 1.00f,
    1.08f, 1.16f, 1.24f, 1.32f, 1.40f, 1.48f, 1.56f, 1.64f
};

static const float default_idle_valve_to_massair_pid_p[TABLE_ROTATES_16] = {
    2.000f, 2.000f, 1.900f, 1.800f, 1.700f, 1.600f, 1.400f, 1.200f,
    1.200f, 1.200f, 1.200f, 1.200f, 1.200f, 1.200f, 1.200f, 1.200f,
};

static const float default_idle_valve_to_massair_pid_i[TABLE_ROTATES_16] = {
    5.000f, 5.000f, 5.000f, 5.000f, 5.000f, 5.000f, 4.600f, 3.998f,
    3.600f, 2.000f, 1.200f, 0.800f, 0.700f, 0.700f, 0.700f, 0.700f,
};

static const float default_idle_valve_to_massair_pid_d[TABLE_ROTATES_16] = {
    0.0020f, 0.0020f, 0.0080f, 0.0130f, 0.0200f, 0.0150f, 0.0020f, 0.0010f,
    0.0010f, 0.0010f, 0.0010f, 0.0010f, 0.0010f, 0.0010f, 0.0010f, 0.0010f,
};

static const float default_idle_valve_to_rpm_pid_p[TABLE_ROTATES_16] = {
    0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f,
    0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f,
};

static const float default_idle_valve_to_rpm_pid_i[TABLE_ROTATES_16] = {
    0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f,
    0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f,
};

static const float default_idle_valve_to_rpm_pid_d[TABLE_ROTATES_16] = {
    0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f,
    0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f,
};

static const float default_idle_ign_to_rpm_pid_p[TABLE_ROTATES_16] = {
    0.020f, 0.020f, 0.020f, 0.020f, 0.020f, 0.010f, 0.004f, 0.000f,
    0.004f, 0.020f, 0.040f, 0.020f, 0.020f, 0.020f, 0.020f, 0.020f,
};

static const float default_idle_ign_to_rpm_pid_i[TABLE_ROTATES_16] = {
    0.020f, 0.020f, 0.020f, 0.020f, 0.010f, 0.006f, 0.003f, 0.002f,
    0.003f, 0.005f, 0.008f, 0.004f, 0.002f, 0.002f, 0.002f, 0.002f,
};

static const float default_idle_ign_to_rpm_pid_d[TABLE_ROTATES_16] = {
    0.0000f, 0.0000f, 0.0000f, 0.0004f, 0.0004f, 0.0004f, 0.0002f, 0.0001f,
    0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f,
};

static const float default_idle_rpm_pid_act_1[TABLE_TEMPERATURES] = {
    0.400f, 0.400f, 0.400f, 0.400f, 0.400f, 0.400f, 0.400f, 0.400f,
    0.390f, 0.370f, 0.340f, 0.340f, 0.340f, 0.340f, 0.340f, 0.340f,
};

static const float default_idle_rpm_pid_act_2[TABLE_TEMPERATURES] = {
    0.600f, 0.600f, 0.600f, 0.600f, 0.600f, 0.600f, 0.600f, 0.550f,
    0.480f, 0.420f, 0.400f, 0.400f, 0.400f, 0.400f, 0.400f, 0.400f,
};

static const float default_tsps_relative_pos[TABLE_ROTATES_16] = {
    -112.0f, -112.0f, -112.0f, -112.0f, -112.0f, -111.9f, -111.7f, -111.5f,
    -111.2f, -111.0f, -111.0f, -111.0f, -111.0f, -111.0f, -111.0f, -111.0f,
};

static const float default_tsps_desync_thr[TABLE_ROTATES_16] = {
    9.0f, 9.0f, 9.0f, 9.0f, 9.0f, 9.0f, 9.0f, 9.0f,
    9.0f, 9.0f, 9.0f, 9.0f, 9.0f, 9.0f, 9.0f, 9.0f,
};

static const float default_idle_ignition_time_by_tps[TABLE_THROTTLES_32] = {
    0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f,
    0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f,
    0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f,
    0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f, 0.00f,
};

static const float default_idle_econ_delay[TABLE_TEMPERATURES] = {
    30.0f, 30.0f, 30.0f, 30.0f, 30.0f, 30.0f, 30.0f, 20.0f,
    10.0f, 3.0f, 1.0f, 0.5f, 0.5f, 0.5f, 0.5f, 0.5f,
};

static const float default_start_econ_delay[TABLE_TEMPERATURES] = {
    5.0f, 5.0f, 5.0f, 5.0f, 5.0f, 5.0f, 4.8f, 4.5f,
    4.0f, 3.5f, 3.2f, 3.0f, 3.0f, 3.0f, 3.0f, 3.0f,
};

static const float default_fan_advance_control[TABLE_TEMPERATURES][TABLE_SPEEDS] = {
    { -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, },
    { -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, },
    { -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, },
    { -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, },
    { -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, },
    { -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, },
    { -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, },
    { -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, },
    { -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, },
    { -1.00f, -1.00f, -0.70f, -0.60f, -0.50f, -0.50f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, },
    { 0.00f, 0.00f, -0.15f, -0.20f, -0.30f, -0.30f, -0.40f, -0.70f, -0.90f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, -1.00f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 0.70f, 0.70f, 0.50f, 0.25f, 0.25f, 0.25f, 0.15f, -0.10f, -0.10f, -0.10f, -0.10f, -0.10f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 0.90f, 0.80f, 0.70f, 0.50f, 0.30f, 0.20f, 0.20f, 0.20f, 0.20f, 0.20f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, },
    { 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, 1.00f, },
};

static const float default_idle_throttle_to_massair_pid_p[TABLE_ROTATES_16] = {
    0.200f, 0.200f, 0.200f, 0.190f, 0.180f, 0.170f, 0.150f, 0.120f,
    0.120f, 0.120f, 0.120f, 0.120f, 0.120f, 0.120f, 0.120f, 0.120f,
};

static const float default_idle_throttle_to_massair_pid_i[TABLE_ROTATES_16] = {
    0.300f, 0.300f, 0.300f, 0.300f, 0.300f, 0.270f, 0.220f, 0.200f,
    0.170f, 0.080f, 0.060f, 0.050f, 0.050f, 0.050f, 0.050f, 0.050f,
};

static const float default_idle_throttle_to_massair_pid_d[TABLE_ROTATES_16] = {
    0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f,
    0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f,
};

static const float default_idle_throttle_to_rpm_pid_p[TABLE_ROTATES_16] = {
    0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f,
    0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f,
};

static const float default_idle_throttle_to_rpm_pid_i[TABLE_ROTATES_16] = {
    0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f,
    0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f, 0.000f,
};

static const float default_idle_throttle_to_rpm_pid_d[TABLE_ROTATES_16] = {
    0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f,
    0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f, 0.0000f,
};

static const float default_throttle_position_1d[TABLE_PEDALS] = {
    0.0f, 0.0f, 0.0f, 0.0f, 0.6f, 1.2f, 2.3f, 4.0f,
    6.2f, 9.6f, 17.1f, 32.6f, 51.0f, 73.9f, 100.0f, 100.0f,
};

static const float default_throttle_startup_move_time[TABLE_TEMPERATURES] = {
    3.0f, 3.0f, 3.0f, 3.0f, 3.0f, 3.0f, 3.0f, 3.0f,
    3.0f, 3.0f, 3.0f, 3.0f, 3.0f, 3.0f, 3.0f, 3.0f,
};

static const float default_stop_throttle_position[TABLE_PEDALS] = {
    0.0f, 1.7f, 3.5f, 5.7f, 8.3f, 11.3f, 15.2f, 19.6f,
    24.8f, 30.9f, 37.8f, 47.0f, 57.0f, 69.1f, 83.5f, 100.0f,
};

static const float default_idle_throttle_position[TABLE_TEMPERATURES] = {
    6.2f, 5.8f, 5.4f, 5.0f, 4.8f, 4.5f, 4.3f, 3.9f,
    3.6f, 3.3f, 3.2f, 3.2f, 3.2f, 3.3f, 3.4f, 3.6f,
};

static const float default_idle_throttle_econ_position[TABLE_ROTATES_32] = {
    3.0f, 3.0f, 3.0f, 3.0f, 3.0f, 2.8f, 2.2f, 1.5f,
    0.5f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
};

static const float default_pedal_ignition_control[TABLE_ROTATES_16] = {
    8.0f, 8.0f, 8.0f, 8.0f, 8.0f, 8.0f, 8.0f, 8.0f,
    7.9f, 7.5f, 7.1f, 6.4f, 5.5f, 4.3f, 2.9f, 1.5f,
};

static const float default_start_throttle_position[TABLE_TEMPERATURES] = {
    8.0f, 8.0f, 8.0f, 7.5f, 7.2f, 6.9f, 6.5f, 5.9f,
    5.5f, 5.2f, 5.0f, 5.0f, 5.0f, 5.0f, 5.0f, 5.0f,
};

static const float default_dynamic_fuel_corr_gbc[TABLE_FILLING_16] = {
    0.02f, 0.02f, 0.02f, 0.03f, 0.08f, 0.15f, 0.22f, 0.31f,
    0.39f, 0.46f, 0.55f, 0.67f, 0.79f, 0.83f, 0.95f, 1.10f,
};

static const float default_dynamic_fuel_corr_temp[TABLE_TEMPERATURES] = {
    1.00f, 0.92f, 0.78f, 0.68f, 0.55f, 0.43f, 0.35f, 0.30f,
    0.24f, 0.19f, 0.13f, 0.10f, 0.10f, 0.10f, 0.10f, 0.10f,
};

static const float default_dynamic_fuel_corr_lpf[TABLE_ROTATES_16] = {
    0.75f, 0.75f, 0.75f, 0.75f, 0.75f, 0.75f, 0.75f, 0.75f,
    0.75f, 0.75f, 0.75f, 0.75f, 0.75f, 0.75f, 0.75f, 0.75f,
};


void config_default_table(sEcuTable *table, uint8_t number)
{
  memset(table, 0, sizeof(sEcuTable));
  memcpy(&table->transform, &default_ecu_table_transform, sizeof(default_ecu_table_transform));

  sprintf(table->name, "Default %d", number + 1);

  table->inj_channel = InjectorChannel1;

  //Bosch 0280155968 - 420 cc/min
  //Bosch 0280156095 - 315 cc/min
  //Bosch 0280155746 - 200 cc/min
  //BMW 03762FA - 180 cc/min
  table->injector_performance = 523.0f;

  table->is_fuel_phase_by_end = 1;
  table->enrichment_ph_sync_enabled = 1;
  table->enrichment_ph_async_enabled = 0;
  table->enrichment_ph_post_injection_enabled = 1;
  table->enrichment_pp_sync_enabled = 1;
  table->enrichment_pp_async_enabled = 0;
  table->enrichment_pp_post_injection_enabled = 1;
  table->fuel_mass_per_cc = 0.75f;
  table->fuel_afr = 14.7f;

  table->enrichment_load_type = 0;
  table->enrichment_load_dead_band = 500.0f;
  table->enrichment_detect_duration = 100.0f;
  table->enrichment_ign_corr_decay_time = 200.0f;
  table->enrichment_injection_phase_decay_time = 200.0f;
  table->enrichment_async_pulses_divider = 5;
  table->enrichment_end_injection_final_phase = 540;
  table->enrichment_end_injection_final_amount = 1.0f;

  table->idle_valve_pos_min = -15;
  table->idle_valve_pos_max = 20;
  table->idle_throttle_pos_min = 0;
  table->idle_throttle_pos_max = 2;

  ecu_transform_to_u8(table->cylinders, default_cylinders, sizeof(table->cylinders), sizeof(default_cylinders), &table->transform.cylinders);

  ecu_transform_to_u8(table->voltages, default_voltages, sizeof(table->voltages), sizeof(default_voltages), &table->transform.voltages);

  ecu_transform_to_u16(table->pressures_16, default_pressures_16, sizeof(table->pressures_16), sizeof(default_pressures_16), &table->transform.pressures_16);
  ecu_transform_to_u16(table->pressures_32, default_pressures_32, sizeof(table->pressures_32), sizeof(default_pressures_32), &table->transform.pressures_32);

  ecu_transform_to_u16(table->rotates_16, default_rotates_16, sizeof(table->rotates_16), sizeof(default_rotates_16), &table->transform.rotates_16);
  ecu_transform_to_u16(table->rotates_32, default_rotates_32, sizeof(table->rotates_32), sizeof(default_rotates_32), &table->transform.rotates_32);

  ecu_transform_to_u16(table->idle_rotates, default_idle_rotates, sizeof(table->idle_rotates), sizeof(default_idle_rotates), &table->transform.idle_rotates);

  ecu_transform_to_u16(table->throttles_16, default_throttles_16, sizeof(table->throttles_16), sizeof(default_throttles_16), &table->transform.throttles_16);
  ecu_transform_to_u16(table->throttles_32, default_throttles_32, sizeof(table->throttles_32), sizeof(default_throttles_32), &table->transform.throttles_32);

  ecu_transform_to_u16(table->pedals, default_pedals, sizeof(table->pedals), sizeof(default_pedals), &table->transform.pedals);

  ecu_transform_to_u16(*table->filling_gbc_map, *default_filling_gbc_map, sizeof(table->filling_gbc_map), sizeof(default_filling_gbc_map), &table->transform.filling_gbc_map);
  ecu_transform_to_u16(*table->filling_gbc_tps, *default_filling_gbc_tps, sizeof(table->filling_gbc_tps), sizeof(default_filling_gbc_tps), &table->transform.filling_gbc_tps);
  ecu_transform_to_u16(*table->throttle_position, *default_throttle_position, sizeof(table->throttle_position), sizeof(default_throttle_position), &table->transform.throttle_position);
  ecu_transform_to_u16(table->stop_throttle_position, default_stop_throttle_position, sizeof(table->stop_throttle_position), sizeof(default_stop_throttle_position), &table->transform.stop_throttle_position);
  ecu_transform_to_u16(table->throttle_position_1d, default_throttle_position_1d, sizeof(table->throttle_position_1d), sizeof(default_throttle_position_1d), &table->transform.throttle_position_1d);
  ecu_transform_to_u8(table->throttle_startup_move_time, default_throttle_startup_move_time, sizeof(table->throttle_startup_move_time), sizeof(default_throttle_startup_move_time), &table->transform.throttle_startup_move_time);
  ecu_transform_to_u8(table->filling_select_koff_tps, default_filling_select_koff_tps, sizeof(table->filling_select_koff_tps), sizeof(default_filling_select_koff_tps), &table->transform.filling_select_koff_tps);
  table->throttle_position_use_1d = 1;

  ecu_transform_to_u8(table->enrichment_rate_start_load, default_enrichment_rate_start_load, sizeof(table->enrichment_rate_start_load), sizeof(default_enrichment_rate_start_load), &table->transform.enrichment_rate_start_load);
  ecu_transform_to_u8(table->enrichment_rate_load_derivative, default_enrichment_rate_load_derivative, sizeof(table->enrichment_rate_load_derivative), sizeof(default_enrichment_rate_load_derivative), &table->transform.enrichment_rate_load_derivative);

  ecu_transform_to_u8(*table->enrichment_rate, *default_enrichment_rate, sizeof(table->enrichment_rate), sizeof(default_enrichment_rate), &table->transform.enrichment_rate);
  ecu_transform_to_u8(table->enrichment_accel_dead_band, default_enrichment_accel_dead_band, sizeof(table->enrichment_accel_dead_band), sizeof(default_enrichment_accel_dead_band), &table->transform.enrichment_accel_dead_band);
  ecu_transform_to_u8(table->enrichment_sync_amount, default_enrichment_sync_amount, sizeof(table->enrichment_sync_amount), sizeof(default_enrichment_sync_amount), &table->transform.enrichment_sync_amount);
  ecu_transform_to_u8(table->enrichment_async_amount, default_enrichment_async_amount, sizeof(table->enrichment_async_amount), sizeof(default_enrichment_async_amount), &table->transform.enrichment_async_amount);
  ecu_transform_to_u8(*table->enrichment_ign_corr, *default_enrichment_ign_corr, sizeof(table->enrichment_ign_corr), sizeof(default_enrichment_ign_corr), &table->transform.enrichment_ign_corr);
  ecu_transform_to_u8(table->enrichment_temp_mult, default_enrichment_temp_mult, sizeof(table->enrichment_temp_mult), sizeof(default_enrichment_temp_mult), &table->transform.enrichment_temp_mult);
  ecu_transform_to_u8(table->enrichment_injection_phase, default_enrichment_injection_phase, sizeof(table->enrichment_injection_phase), sizeof(default_enrichment_injection_phase), &table->transform.enrichment_injection_phase);
  ecu_transform_to_u8(*table->enrichment_tps_selection, *default_enrichment_tps_selection, sizeof(table->enrichment_tps_selection), sizeof(default_enrichment_tps_selection), &table->transform.enrichment_tps_selection);

  ecu_transform_to_u8(table->fillings_16, default_fillings_16, sizeof(table->fillings_16), sizeof(default_fillings_16), &table->transform.fillings_16);
  ecu_transform_to_u8(table->fillings_32, default_fillings_32, sizeof(table->fillings_32), sizeof(default_fillings_32), &table->transform.fillings_32);

  ecu_transform_to_u8(*table->ignitions, *default_ignitions, sizeof(table->ignitions), sizeof(default_ignitions), &table->transform.ignitions);
  ecu_transform_to_u8(*table->fuel_mixtures, *default_fuel_mixtures, sizeof(table->fuel_mixtures), sizeof(default_fuel_mixtures), &table->transform.fuel_mixtures);
  ecu_transform_to_u8(*table->injection_phase, *default_injection_phase, sizeof(table->injection_phase), sizeof(default_injection_phase), &table->transform.injection_phase);

  ecu_transform_to_u8(table->ignition_time_rpm_mult, default_ignition_time_rpm_mult, sizeof(table->ignition_time_rpm_mult), sizeof(default_ignition_time_rpm_mult), &table->transform.ignition_time_rpm_mult);
  ecu_transform_to_u8(table->ignition_time, default_ignition_time, sizeof(table->ignition_time), sizeof(default_ignition_time), &table->transform.ignition_time);
  ecu_transform_to_u8(table->injector_lag, default_injector_lag, sizeof(table->injector_lag), sizeof(default_injector_lag), &table->transform.injector_lag);

  ecu_transform_to_s8(table->engine_temps, default_engine_temps, sizeof(table->engine_temps), sizeof(default_engine_temps), &table->transform.engine_temps);

  ecu_transform_to_s8(table->air_temps, default_air_temps, sizeof(table->air_temps), sizeof(default_air_temps), &table->transform.air_temps);
  ecu_transform_to_s8(*table->air_temp_mix_corr, *default_air_temp_mix_corrs, sizeof(table->air_temp_mix_corr), sizeof(default_air_temp_mix_corrs), &table->transform.air_temp_mix_corr);
  ecu_transform_to_s8(*table->air_temp_ign_corr, *default_air_temp_ign_corrs, sizeof(table->air_temp_ign_corr), sizeof(default_air_temp_ign_corrs), &table->transform.air_temp_ign_corr);
  ecu_transform_to_s8(*table->engine_temp_mix_corr, *default_engine_temp_mix_corrs, sizeof(table->engine_temp_mix_corr), sizeof(default_engine_temp_mix_corrs), &table->transform.engine_temp_mix_corr);
  ecu_transform_to_s8(*table->engine_temp_ign_corr, *default_engine_temp_ign_corrs, sizeof(table->engine_temp_ign_corr), sizeof(default_engine_temp_ign_corrs), &table->transform.engine_temp_ign_corr);

  ecu_transform_to_u8(table->idle_wish_rotates, default_idle_wish_rotates, sizeof(table->idle_wish_rotates), sizeof(default_idle_wish_rotates), &table->transform.idle_wish_rotates);
  ecu_transform_to_u8(table->idle_wish_massair, default_idle_wish_massair, sizeof(table->idle_wish_massair), sizeof(default_idle_wish_massair), &table->transform.idle_wish_massair);
  ecu_transform_to_u8(table->idle_wish_ignition_static, default_idle_wish_ignition_static, sizeof(table->idle_wish_ignition_static), sizeof(default_idle_wish_ignition_static), &table->transform.idle_wish_ignition_static);
  ecu_transform_to_u8(table->idle_wish_ignition, default_idle_wish_ignition, sizeof(table->idle_wish_ignition), sizeof(default_idle_wish_ignition), &table->transform.idle_wish_ignition);
  ecu_transform_to_u8(table->idle_valve_position, default_idle_valve_position, sizeof(table->idle_valve_position), sizeof(default_idle_valve_position), &table->transform.idle_valve_position);
  ecu_transform_to_u8(table->idle_valve_econ_position, default_idle_valve_econ_position, sizeof(table->idle_valve_econ_position), sizeof(default_idle_valve_econ_position), &table->transform.idle_valve_econ_position);
  ecu_transform_to_u8(table->idle_throttle_position, default_idle_throttle_position, sizeof(table->idle_throttle_position), sizeof(default_idle_throttle_position), &table->transform.idle_throttle_position);
  ecu_transform_to_u8(table->idle_throttle_econ_position, default_idle_throttle_econ_position, sizeof(table->idle_throttle_econ_position), sizeof(default_idle_throttle_econ_position), &table->transform.idle_throttle_econ_position);
  ecu_transform_to_u8(table->pedal_ignition_control, default_pedal_ignition_control, sizeof(table->pedal_ignition_control), sizeof(default_pedal_ignition_control), &table->transform.pedal_ignition_control);

  ecu_transform_to_u8(table->warmup_mixtures, default_warmup_mixtures, sizeof(table->warmup_mixtures), sizeof(default_warmup_mixtures), &table->transform.warmup_mixtures);
  ecu_transform_to_u8(table->warmup_mix_koffs, default_warmup_mix_koffs, sizeof(table->warmup_mix_koffs), sizeof(default_warmup_mix_koffs), &table->transform.warmup_mix_koffs);
  ecu_transform_to_u8(table->warmup_mix_corrs, default_warmup_mix_corrs, sizeof(table->warmup_mix_corrs), sizeof(default_warmup_mix_corrs), &table->transform.warmup_mix_corrs);

  ecu_transform_to_u8(table->cold_start_idle_corrs, default_cold_start_idle_corrs, sizeof(table->cold_start_idle_corrs), sizeof(default_cold_start_idle_corrs), &table->transform.cold_start_idle_corrs);
  ecu_transform_to_u8(table->cold_start_idle_times, default_cold_start_idle_times, sizeof(table->cold_start_idle_times), sizeof(default_cold_start_idle_times), &table->transform.cold_start_idle_times);
  ecu_transform_to_u8(table->start_tps_corrs, default_start_tps_corrs, sizeof(table->start_tps_corrs), sizeof(default_start_tps_corrs), &table->transform.start_tps_corrs);
  ecu_transform_to_u16(table->start_async_filling, default_start_async_filling, sizeof(table->start_async_filling), sizeof(default_start_async_filling), &table->transform.start_async_filling);
  ecu_transform_to_u16(table->start_large_filling, default_start_large_filling, sizeof(table->start_large_filling), sizeof(default_start_large_filling), &table->transform.start_large_filling);
  ecu_transform_to_u16(table->start_small_filling, default_start_small_filling, sizeof(table->start_small_filling), sizeof(default_start_small_filling), &table->transform.start_small_filling);
  ecu_transform_to_u8(table->start_filling_time, default_start_filling_time, sizeof(table->start_filling_time), sizeof(default_start_filling_time), &table->transform.start_filling_time);
  ecu_transform_to_u8(table->start_ignition, default_start_ignition, sizeof(table->start_ignition), sizeof(default_start_ignition), &table->transform.start_ignition);
  ecu_transform_to_u8(table->start_injection_phase, default_start_injection_phase, sizeof(table->start_injection_phase), sizeof(default_start_injection_phase), &table->transform.start_injection_phase);
  ecu_transform_to_u8(table->start_idle_valve_pos, default_start_idle_valve_pos, sizeof(table->start_idle_valve_pos), sizeof(default_start_idle_valve_pos), &table->transform.start_idle_valve_pos);
  ecu_transform_to_u8(table->start_throttle_position, default_start_throttle_position, sizeof(table->start_throttle_position), sizeof(default_start_throttle_position), &table->transform.start_throttle_position);
  table->start_large_count = 4;

  ecu_transform_to_s8(table->idle_pids_rpm_koffs, default_idle_pids_rpm_koffs, sizeof(table->idle_pids_rpm_koffs), sizeof(default_idle_pids_rpm_koffs), &table->transform.idle_pids_rpm_koffs);
  ecu_transform_to_s16(table->idle_valve_to_massair_pid_p, default_idle_valve_to_massair_pid_p, sizeof(table->idle_valve_to_massair_pid_p), sizeof(default_idle_valve_to_massair_pid_p), &table->transform.idle_valve_to_massair_pid_p);
  ecu_transform_to_s16(table->idle_valve_to_massair_pid_i, default_idle_valve_to_massair_pid_i, sizeof(table->idle_valve_to_massair_pid_i), sizeof(default_idle_valve_to_massair_pid_i), &table->transform.idle_valve_to_massair_pid_i);
  ecu_transform_to_s16(table->idle_valve_to_massair_pid_d, default_idle_valve_to_massair_pid_d, sizeof(table->idle_valve_to_massair_pid_d), sizeof(default_idle_valve_to_massair_pid_d), &table->transform.idle_valve_to_massair_pid_d);

  ecu_transform_to_s16(table->idle_valve_to_rpm_pid_p, default_idle_valve_to_rpm_pid_p, sizeof(table->idle_valve_to_rpm_pid_p), sizeof(default_idle_valve_to_rpm_pid_p), &table->transform.idle_valve_to_rpm_pid_p);
  ecu_transform_to_s16(table->idle_valve_to_rpm_pid_i, default_idle_valve_to_rpm_pid_i, sizeof(table->idle_valve_to_rpm_pid_i), sizeof(default_idle_valve_to_rpm_pid_i), &table->transform.idle_valve_to_rpm_pid_i);
  ecu_transform_to_s16(table->idle_valve_to_rpm_pid_d, default_idle_valve_to_rpm_pid_d, sizeof(table->idle_valve_to_rpm_pid_d), sizeof(default_idle_valve_to_rpm_pid_d), &table->transform.idle_valve_to_rpm_pid_d);

  ecu_transform_to_s16(table->idle_throttle_to_massair_pid_p, default_idle_throttle_to_massair_pid_p, sizeof(table->idle_throttle_to_massair_pid_p), sizeof(default_idle_throttle_to_massair_pid_p), &table->transform.idle_throttle_to_massair_pid_p);
  ecu_transform_to_s16(table->idle_throttle_to_massair_pid_i, default_idle_throttle_to_massair_pid_i, sizeof(table->idle_throttle_to_massair_pid_i), sizeof(default_idle_throttle_to_massair_pid_i), &table->transform.idle_throttle_to_massair_pid_i);
  ecu_transform_to_s16(table->idle_throttle_to_massair_pid_d, default_idle_throttle_to_massair_pid_d, sizeof(table->idle_throttle_to_massair_pid_d), sizeof(default_idle_throttle_to_massair_pid_d), &table->transform.idle_throttle_to_massair_pid_d);

  ecu_transform_to_s16(table->idle_throttle_to_rpm_pid_p, default_idle_throttle_to_rpm_pid_p, sizeof(table->idle_throttle_to_rpm_pid_p), sizeof(default_idle_throttle_to_rpm_pid_p), &table->transform.idle_throttle_to_rpm_pid_p);
  ecu_transform_to_s16(table->idle_throttle_to_rpm_pid_i, default_idle_throttle_to_rpm_pid_i, sizeof(table->idle_throttle_to_rpm_pid_i), sizeof(default_idle_throttle_to_rpm_pid_i), &table->transform.idle_throttle_to_rpm_pid_i);
  ecu_transform_to_s16(table->idle_throttle_to_rpm_pid_d, default_idle_throttle_to_rpm_pid_d, sizeof(table->idle_throttle_to_rpm_pid_d), sizeof(default_idle_throttle_to_rpm_pid_d), &table->transform.idle_throttle_to_rpm_pid_d);

  ecu_transform_to_s16(table->idle_ign_to_rpm_pid_p, default_idle_ign_to_rpm_pid_p, sizeof(table->idle_ign_to_rpm_pid_p), sizeof(default_idle_ign_to_rpm_pid_p), &table->transform.idle_ign_to_rpm_pid_p);
  ecu_transform_to_s16(table->idle_ign_to_rpm_pid_i, default_idle_ign_to_rpm_pid_i, sizeof(table->idle_ign_to_rpm_pid_i), sizeof(default_idle_ign_to_rpm_pid_i), &table->transform.idle_ign_to_rpm_pid_i);
  ecu_transform_to_s16(table->idle_ign_to_rpm_pid_d, default_idle_ign_to_rpm_pid_d, sizeof(table->idle_ign_to_rpm_pid_d), sizeof(default_idle_ign_to_rpm_pid_d), &table->transform.idle_ign_to_rpm_pid_d);

  ecu_transform_to_u8(table->idle_rpm_pid_act_1, default_idle_rpm_pid_act_1, sizeof(table->idle_rpm_pid_act_1), sizeof(default_idle_rpm_pid_act_1), &table->transform.idle_rpm_pid_act_1);
  ecu_transform_to_u8(table->idle_rpm_pid_act_2, default_idle_rpm_pid_act_2, sizeof(table->idle_rpm_pid_act_2), sizeof(default_idle_rpm_pid_act_2), &table->transform.idle_rpm_pid_act_2);

  table->short_term_corr_pid_p = 0.0000f;
  table->short_term_corr_pid_i = 0.0000f;
  table->short_term_corr_pid_d = 0.0000f;

  table->idle_ign_deviation_min = -10.0f;
  table->idle_ign_deviation_max = 12.0f;

  table->idle_ign_fan_low_corr = 0.6f;
  table->idle_ign_fan_high_corr = 1.2f;
  table->idle_air_fan_low_corr = 0.1f;
  table->idle_air_fan_high_corr = 0.2f;

  ecu_transform_to_u8(table->speeds, default_speeds, sizeof(table->speeds), sizeof(default_speeds), &table->transform.speeds);
  ecu_transform_to_u8(table->idle_rpm_shift, default_idle_rpm_shift, sizeof(table->idle_rpm_shift), sizeof(default_idle_rpm_shift), &table->transform.idle_rpm_shift);

  table->knock_ign_corr_max = -5.0f;
  table->knock_inj_corr_max = 0.00f;
  ecu_transform_to_u8(table->knock_noise_level, default_knock_noise_level, sizeof(table->knock_noise_level), sizeof(default_knock_noise_level), &table->transform.knock_noise_level);
  ecu_transform_to_u8(table->knock_threshold, default_knock_threshold, sizeof(table->knock_threshold), sizeof(default_knock_threshold), &table->transform.knock_threshold);
  ecu_transform_to_u8(*table->knock_zone, *default_knock_zone, sizeof(table->knock_zone), sizeof(default_knock_zone), &table->transform.knock_zone);
  ecu_transform_to_u8(table->knock_gain, default_knock_gain, sizeof(table->knock_gain), sizeof(default_knock_gain), &table->transform.knock_gain);
  ecu_transform_to_u8(table->knock_filter_frequency, default_knock_filter_frequency, sizeof(table->knock_filter_frequency), sizeof(default_knock_filter_frequency), &table->transform.knock_filter_frequency);
  ecu_transform_to_u8(*table->knock_cy_level_multiplier, *default_knock_cy_level_multiplier, sizeof(table->knock_cy_level_multiplier), sizeof(default_knock_cy_level_multiplier), &table->transform.knock_cy_level_multiplier);
  ecu_transform_to_s8(table->knock_detect_phase_start, default_knock_detect_phase_start, sizeof(table->knock_detect_phase_start), sizeof(default_knock_detect_phase_start), &table->transform.knock_detect_phase_start);
  ecu_transform_to_s8(table->knock_detect_phase_end, default_knock_detect_phase_end, sizeof(table->knock_detect_phase_end), sizeof(default_knock_detect_phase_end), &table->transform.knock_detect_phase_end);
  ecu_transform_to_u8(table->knock_integrator_time, default_knock_integrator_time, sizeof(table->knock_integrator_time), sizeof(default_knock_integrator_time), &table->transform.knock_integrator_time);

  ecu_transform_to_s8(table->tsps_relative_pos, default_tsps_relative_pos, sizeof(table->tsps_relative_pos), sizeof(default_tsps_relative_pos), &table->transform.tsps_relative_pos);
  ecu_transform_to_u8(table->tsps_desync_thr, default_tsps_desync_thr, sizeof(table->tsps_desync_thr), sizeof(default_tsps_desync_thr), &table->transform.tsps_desync_thr);
  ecu_transform_to_u8(table->idle_ignition_time_by_tps, default_idle_ignition_time_by_tps, sizeof(table->idle_ignition_time_by_tps), sizeof(default_idle_ignition_time_by_tps), &table->transform.idle_ignition_time_by_tps);
  ecu_transform_to_u8(table->idle_econ_delay, default_idle_econ_delay, sizeof(table->idle_econ_delay), sizeof(default_idle_econ_delay), &table->transform.idle_econ_delay);
  ecu_transform_to_u8(table->start_econ_delay, default_start_econ_delay, sizeof(table->start_econ_delay), sizeof(default_start_econ_delay), &table->transform.start_econ_delay);

  ecu_transform_to_u8(table->dynamic_fuel_corr_gbc, default_dynamic_fuel_corr_gbc, sizeof(table->dynamic_fuel_corr_gbc), sizeof(default_dynamic_fuel_corr_gbc), &table->transform.dynamic_fuel_corr_gbc);
  ecu_transform_to_u8(table->dynamic_fuel_corr_temp, default_dynamic_fuel_corr_temp, sizeof(table->dynamic_fuel_corr_temp), sizeof(default_dynamic_fuel_corr_temp), &table->transform.dynamic_fuel_corr_temp);
  ecu_transform_to_u8(table->dynamic_fuel_corr_lpf, default_dynamic_fuel_corr_lpf, sizeof(table->dynamic_fuel_corr_lpf), sizeof(default_dynamic_fuel_corr_lpf), &table->transform.dynamic_fuel_corr_lpf);

  table->fan_advance_control_low  = -0.20f;
  table->fan_advance_control_mid  =  0.00f;
  table->fan_advance_control_high =  0.20f;
  ecu_transform_to_s8(*table->fan_advance_control, *default_fan_advance_control, sizeof(table->fan_advance_control), sizeof(default_fan_advance_control), &table->transform.fan_advance_control);

  memset(table->ignition_corr_cy, 0, sizeof(table->ignition_corr_cy));
  memset(table->injection_corr_cy, 0, sizeof(table->injection_corr_cy));
  memset(table->cy_corr_injection, 0, sizeof(table->cy_corr_injection));
  memset(table->cy_corr_ignition, 0, sizeof(table->cy_corr_ignition));
}

void config_default_params(sEcuParams *table)
{
  table->engineVolume = 1770.0f;

  table->isSwitchByExternal = 0;
  table->startupTableNumber = 0;
  table->switchPos1Table = 0;
  table->switchPos0Table = 0;
  table->switchPos2Table = 0;

  table->cutoffRPM = 7000;
  table->cutoffMode = 5;
  table->cutoffAdvance = 10.0f;
  table->cutoffMixture = 12.6f;
  table->oilPressureCutoffRPM = 2000;
  table->speedInputCorrection = 0.91f;
  table->speedOutputCorrection = 0.89f;

  table->useLambdaSensor = 1;
  table->phasedMode = 1;
  table->useKnockSensor = 1;
  table->performAdaptation = 1;
  table->performIdleAdaptation = 0;
  table->isSingleCoil = 0;
  table->isIndividualCoils = 0;
  table->isEconEnabled = 0;

  table->fanHighTemperature = 93;
  table->fanMidTemperature = 91;
  table->fanLowTemperature = 89;

  table->isBluetoothEnabled = 0;
  table->bluetoothPin = 1902;
  strcpy(table->bluetoothName, "BT_ECU");

  table->shiftMode = 0;
  table->shiftThrThr = 80;
  table->shiftRpmThr = 5000;
  table->shiftRpmTill = 2500;
  table->shiftAdvance = 3.0f;
  table->shiftMixture = 12.1f;

  table->useIdleValve = 0;
  table->useEtc = 1;
  table->etcPedalDeadZone = 0.0f;
  table->useShortTermCorr = 0;
  table->useLongTermCorr = 0;

  table->learn_cycles_delay_mult = 1.3f;
  table->air_temp_corr_koff_min = 0.8f;
  table->air_temp_corr_koff_max = 1.0f;

  table->tps_voltage_low = 1.320f;
  table->tps_voltage_high = 4.570f;

  table->map_pressure_gain = 19000.0f;
  table->map_pressure_offset = 10000.0f;
}

void config_default_corrections(sEcuCorrections *table)
{
  memset(table, 0, sizeof(sEcuCorrections));

  memcpy(&table->transform, &default_ecu_corrections_transform, sizeof(default_ecu_corrections_transform));
}

void config_default_critical_backup(sEcuCriticalBackup *table)
{
  memset(table, 0, sizeof(sEcuCriticalBackup));
}

HAL_StatusTypeDef config_init(void)
{
  HAL_StatusTypeDef status = HAL_OK;
  status = flash_checkchip();
  return status;
}


int8_t config_load_table(sEcuTable *table, uint8_t number)
{
  if(number >= TABLE_SETUPS)
    return -1;
  return flash_page_load(table, sizeof(sEcuTable), CONFIG_OFFSET_TABLES + number);
}

int8_t config_save_table(const sEcuTable *table, uint8_t number)
{
  if(number >= TABLE_SETUPS)
    return -1;
  return flash_page_save(table, sizeof(sEcuTable), CONFIG_OFFSET_TABLES + number);
}


int8_t config_load_params(sEcuParams *params)
{
  return flash_page_load(params, sizeof(sEcuParams), CONFIG_OFFSET_PARAMS);
}

int8_t config_save_params(const sEcuParams *params)
{
  return flash_page_save(params, sizeof(sEcuParams), CONFIG_OFFSET_PARAMS);
}

int8_t config_load_corrections(sEcuCorrections *table)
{
  return flash_page_load(table, sizeof(sEcuCorrections), CONFIG_OFFSET_CORRECTIONS);
}

int8_t config_save_corrections(const sEcuCorrections *table)
{
  return flash_page_save(table, sizeof(sEcuCorrections), CONFIG_OFFSET_CORRECTIONS);
}

int8_t config_load_critical_backup(sEcuCriticalBackup *table)
{
  return flash_bkpsram_load(table, sizeof(sEcuCriticalBackup), CONFIG_OFFSET_CRITICALS);
}

int8_t config_save_critical_backup(const sEcuCriticalBackup *table)
{
  return flash_bkpsram_save(table, sizeof(sEcuCriticalBackup), CONFIG_OFFSET_CRITICALS);
}

int8_t config_load_all(sEcuParams *params, sEcuTable *tables, uint32_t tables_count)
{
  static uint8_t state = 0;
  static int8_t current_table = 0;
  static int8_t tables_left = 0;
  int8_t status;

  if(!tables_count)
	  return -1;

  switch(state) {
    case 0 :
      status = config_load_params(params);
      if(status) {
        if(status > 0) {
          current_table = 0;
          tables_left = tables_count;
          state++;
        } else {
          state = 0;
          return -1;
        }
      }
      break;
    case 1 :
      status = config_load_table(&tables[current_table], current_table);
      if(status) {
        if(status > 0) {
          tables_left--;
          if(tables_left) {
            current_table++;
          } else {
            current_table = 0;
            state = 0;
            return 1;
          }
        } else {
          state = 0;
          current_table = 0;
          return -2;
        }
      }
      break;
    default:
      state = 0;
      break;
  }
  return 0;
}

int8_t config_save_all(const sEcuParams *params, const sEcuCorrections *corrections, const sEcuTable *tables, uint32_t tables_count)
{
  static uint8_t state = 0;
  static int8_t current_table = 0;
  static int8_t tables_left = 0;

  if(!tables_count)
	  return -1;

  int8_t status;
  switch(state) {
    case 0 :
      status = config_save_params(params);
      if(status) {
        if(status > 0) {
          state++;
        } else {
          state = 0;
          return -1;
        }
      }
      break;
    case 1 :
      status = config_save_corrections(corrections);
      if(status) {
        if(status > 0) {
          current_table = 0;
          tables_left = tables_count;
          state++;
        } else {
          state = 0;
          return -2;
        }
      }
      break;
    case 2 :
      status = config_save_table(&tables[current_table], current_table);
      if(status) {
        if(status > 0) {
          tables_left--;
          if(tables_left) {
            current_table++;
          } else {
            current_table = 0;
            state = 0;
            return 1;
          }
        } else {
          state = 0;
          current_table = 0;
          return -3;
        }
      }
      break;
    default:
      state = 0;
      break;
  }
  return 0;
}
